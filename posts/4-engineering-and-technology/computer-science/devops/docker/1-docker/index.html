<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Docker | Signal&#39;s Blog</title>
<meta name="keywords" content="Engineering &amp; Technology, Computer Science, DevOps">
<meta name="description" content="Introduction to Docker SHOW CONTENTS Docker was developed to address the challenges of software deployment across various environments by providing a lightweight, consistent, and portable solution. Prior to Docker, developers often faced issues like &ldquo;it works on my machine, but not in production,&rdquo; caused by inconsistencies in dependencies, libraries, and configurations. Docker resolves this by containerizing applications, ensuring they run uniformly across any infrastructure. Its primary goal is to simplify development, testing, and deployment by encapsulating applications and their dependencies into isolated, reproducible containers.">
<meta name="author" content="Signal Yu">
<link rel="canonical" href="https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/devops/docker/1-docker/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5a0ace7f2dc73037e40ceea0eb0d119b5d798dba2da38d9129982a8cf9fa07a5.css" integrity="sha256-WgrOfy3HMDfkDO6g6w0Rm115jboto42RKZgqjPn6B6U=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://signalyu.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://signalyu.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://signalyu.github.io/favicon-32x32">
<link rel="apple-touch-icon" href="https://signalyu.github.io/apple-touch-icon">
<link rel="mask-icon" href="https://signalyu.github.io/favicon.io">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/devops/docker/1-docker/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
  

<meta property="og:title" content="Docker" />
<meta property="og:description" content="Introduction to Docker SHOW CONTENTS Docker was developed to address the challenges of software deployment across various environments by providing a lightweight, consistent, and portable solution. Prior to Docker, developers often faced issues like &ldquo;it works on my machine, but not in production,&rdquo; caused by inconsistencies in dependencies, libraries, and configurations. Docker resolves this by containerizing applications, ensuring they run uniformly across any infrastructure. Its primary goal is to simplify development, testing, and deployment by encapsulating applications and their dependencies into isolated, reproducible containers." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/devops/docker/1-docker/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2025-04-14T09:37:42+08:00" />
<meta property="article:modified_time" content="2025-04-14T09:37:42+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Docker"/>
<meta name="twitter:description" content="Introduction to Docker SHOW CONTENTS Docker was developed to address the challenges of software deployment across various environments by providing a lightweight, consistent, and portable solution. Prior to Docker, developers often faced issues like &ldquo;it works on my machine, but not in production,&rdquo; caused by inconsistencies in dependencies, libraries, and configurations. Docker resolves this by containerizing applications, ensuring they run uniformly across any infrastructure. Its primary goal is to simplify development, testing, and deployment by encapsulating applications and their dependencies into isolated, reproducible containers."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://signalyu.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Docker",
      "item": "https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/devops/docker/1-docker/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Docker",
  "name": "Docker",
  "description": "Introduction to Docker SHOW CONTENTS Docker was developed to address the challenges of software deployment across various environments by providing a lightweight, consistent, and portable solution. Prior to Docker, developers often faced issues like \u0026ldquo;it works on my machine, but not in production,\u0026rdquo; caused by inconsistencies in dependencies, libraries, and configurations. Docker resolves this by containerizing applications, ensuring they run uniformly across any infrastructure. Its primary goal is to simplify development, testing, and deployment by encapsulating applications and their dependencies into isolated, reproducible containers.",
  "keywords": [
    "Engineering \u0026 Technology", "Computer Science", "DevOps"
  ],
  "articleBody": "Introduction to Docker SHOW CONTENTS Docker was developed to address the challenges of software deployment across various environments by providing a lightweight, consistent, and portable solution. Prior to Docker, developers often faced issues like “it works on my machine, but not in production,” caused by inconsistencies in dependencies, libraries, and configurations. Docker resolves this by containerizing applications, ensuring they run uniformly across any infrastructure. Its primary goal is to simplify development, testing, and deployment by encapsulating applications and their dependencies into isolated, reproducible containers. These containers are user-space instances that package code, runtime, system tools, and libraries, ensuring consistency across environments.\nThe key difference between Docker and Virtual Machines (VMs) lies in their architecture. VMs emulate entire hardware stacks, requiring a full operating system for each instance, which results in significant overhead. In contrast, Docker uses containers that share the host OS kernel, offering a more lightweight and efficient solution by isolating applications at the process level. Docker has three core components: images, containers, and registries. Images are read-only templates that contain application code and dependencies. Containers are runnable instances of these images; they are isolated, lightweight, and ephemeral. Registries are repositories that store and share Docker images. Docker Architecture SHOW CONTENTS Docker follows a Client/Server (C/S) architecture with a loosely coupled backend where various components perform specific functions. The basic workflow of Docker is as follows: Docker Client: The user interacts with the Docker Client, which communicates with the Docker Daemon to send requests. Docker Daemon: This is the core component of Docker’s architecture. It provides the Docker Server functionality, enabling it to accept requests from the Docker Client. Docker Engine: The Docker Engine executes a series of internal tasks. Each task is represented as a “Job.” Job Execution: Each Job performs a specific function, such as building an image, starting a container, or managing storage. Graph Driver: If a Job requires a container image, the Engine fetches it from a Docker Registry. The Graph driver stores the downloaded image as a Graph (a layered filesystem) and manages its dependencies. Network Creation: When a network environment needs to be created for Docker, the Network Driver is used to create and configure the network for Docker containers. Resource Management and Execution: If Docker needs to limit resources or execute user commands within containers, the Exec Driver is responsible for completing these operations. Libcontainer: Libcontainer is an independent container management package. Both the Network Driver and the Exec Driver rely on Libcontainer to perform specific container management operations. Common Docker Commands Basic Commands SHOW CONTENTS Start/Stop/Restart Docker: sudo systemctl start docker sudo systemctl stop docker sudo systemctl restart docker View Docker Status: sudo systemctl status docker View Docker Info: docker info View Docker Help Documentation: docker --help View Docker Version: docker -v Docker Image Commands SHOW CONTENTS Search for a Docker Image: docker search docker search nginx Pull a Docker Image: docker pull docker pull nginx List Docker Images: docker images docker image ls Inspect a Docker Image: docker inspect docker inspect nginx Tag a Docker Image: docker tag : docker tag nginx:latest nginx:1.27.4 Remove a Docker Image: docker rmi docker rmi nignx:1.27.4 Build a Docker Image: docker build -t : docker build -t myapp:latest . Save a Docker Image to a File: docker save -o .tar : docker save -o myapp.tar myapp:latest Load a Docker Image from a File: docker load -i .tar docker load -i myapp.tar Prune Unused Docker Images: docker image prune docker image prune -a Docker Container Commands SHOW CONTENTS docker run: Create and start a new container docker run -it -p 8080:8080 --name tomcat9 tomcat:9-jre17 /bin/bash: Start a new container from the tomcat:9-jre17 image, name it tomcat9, map port 8080 inside the container to port 8080 on the host, and open an interactive bash shell inside the container. docker ps: List all currently running containers docker ps: List containers that are currently running. docker ps -a: List all containers. docker start : Start a stopped container docker start my_container: Start a container with the name my_container. docker restart : Restart a container docker restart my_container: Restart the container named my_container. docker stop : Stop a running container docker stop my_container: Stop the container named my_container. docker kill : Force stop a running container docker kill my_container: Force stop the container named my_container. docker rm : Remove a stopped container docker rm my_container: Remove the container named my_container after it has stopped. docker run -d : Start a container in detached mode (background) docker run -d nginx: Run the Nginx container in the background. docker logs : View logs of a container docker logs my_container: View logs for the container named my_container. docker top : View the running processes inside a container docker top my_container: Display the processes running inside my_container. docker inspect : Get detailed information about a container docker inspect my_container: Show detailed metadata about the container named my_container. docker exec -it : Execute a command inside a running container (interactive mode) docker exec -it my_container bash: Open an interactive bash shell inside my_container. exit: Exit from an interactive session inside a container exit: Exit the interactive shell of the container and return to the host. docker cp : : Copy files from a container to the host docker cp my_container:/app/file.txt /host/directory/: Copy file.txt from the container to the host. Docker Images SHOW CONTENTS A Docker image is a read-only template used to create containers. It is composed of several layers stacked on top of each other, with each layer representing a snapshot of the filesystem at a specific point in time. These snapshots capture modifications made by Docker instructions (such as installing a package, copying files, or modifying configurations). Layers are created during the execution of commands in a Dockerfile or when using a pre-existing image to build a new one.\nDocker leverages UnionFS to efficiently manage these layers, allowing it to present a unified view of the container’s filesystem. This approach helps optimize storage and performance, as common layers can be shared across different images. Here is a simple example of creating an image using a Dockerfile:\nFROM ubuntu # This layer contains the base Ubuntu image RUN apt-get update # This layer contains the updated package list COPY . /app # This layer contains the application files copied into /app CMD [\"python\", \"/app/app.py\"] # This layer contains the command to run the application when the container starts Docker provides the docker commit command, which allows creating a new image based on the changes made to a running container. It is similar to taking a snapshot of the container’s current state. Below is a real-world example:\n# Run a container from a base image docker run -it ubuntu /bin/bash # Make changes inside the container apt-get update apt-get install -y vim # Commit the container to create a new image docker commit my-ubuntu-image Docker Volumes SHOW CONTENTS A Docker volume is a persistent storage mechanism designed to store data outside of a container’s filesystem. Volumes are stored on the host machine and can be shared and reused across multiple containers. They are particularly useful for overcoming the ephemeral nature of container filesystems, ensuring that data persists even when containers are stopped, removed, or replaced. Below are some example use cases:\n# Create a named volume (stored in /var/lib/docker/volumes/mysql_data on the host) docker volume create mysql_data # Run a MySQL container, mounting the volume to store data persistently (default is rw for read-write) docker run -d --name mysql1 -v mysql_data:/var/lib/mysql mysql # Run a container with a read-only volume mount, preventing modifications to the config files docker run -d --name myapp -v /tmp/config:/app/config:ro myapp # Use --volumes-from to mount the volume from mysql1 into mysql2, sharing data between the containers docker run -d --volumes-from mysql1 --name mysql2 mysql Installing Software in Docker Search Image Versions SHOW CONTENTS vim ~/.bashrc: # Search docker image versions dkr_image_versions() { # Usage: dkr_image_versions [limit] # Fetches version tags from Docker Hub for a given image, sorted by version number # Default shows all versions, optional limit controls output count local image_name=$1 local limit=${2:-0} # Default 0 (show all), if not provided # Validate input if [ -z \"$image_name\" ]; then echo \"Error: Image name not specified\" \u003e\u00262 echo \"Usage: dkr_image_versions [limit]\" \u003e\u00262 return 1 fi # Fetch and process versions versions=$(curl -s \"https://hub.docker.com/v2/repositories/library/$ {image_name}/tags/?page_size=100\" | \\ jq -r '.results[].name' | \\ grep -E '^[0-9]+\\.*' | \\ sort -rV) # Reverse version sort (newest first) # Handle empty results if [ -z \"$versions\" ]; then echo \"No version tags found for image: ${image_name}\" \u003e\u00262 return 1 fi # Apply limit if specified if [ \"$limit\" -gt 0 ]; then echo \"$versions\" | head -n \"$limit\" else echo \"$versions\" fi } source ~/.bashrc dkr_image_versions ubuntu [number] Tomcat SHOW CONTENTS Run the Tomcat container with interactive shell: docker run -p 8080:8080 --name tomcat2 -it tomcat:9-jre17 /bin/bash Remove the webapps directory: rm -r webapps Rename webapps.dist to webapps: mv webapps.dist webapps Start Tomcat in the background: ./bin/catalina.sh run \u0026 Open port 8080 in the firewall: sudo firewall-cmd --permanent --add-port=8080/tcp Reload the firewall configuration to apply changes: sudo firewall-cmd --reload MySQL SHOW CONTENTS Create Volumes for Log, Data, and Config: docker volume create mysql_data # Volume for MySQL data docker volume create mysql_log # Volume for MySQL logs docker volume create mysql_conf # Volume for MySQL configuration Run MySQL Container with Volumes: docker run -d \\ --name mysql \\ -e MYSQL_ROOT_PASSWORD=my-secret-pw \\ -p 3306:3306 \\ -v mysql_data:/var/lib/mysql \\ -v mysql_log:/var/log/mysql \\ -v mysql_conf:/etc/mysql/conf.d \\ mysql:latest Configure MySQL (Optional) # Optional: Copy custom config file to the volume cp my.cnf /var/lib/docker/volumes/mysql_conf/ Access MySQL: docker exec -it mysql mysql -u root -p ",
  "wordCount" : "1617",
  "inLanguage": "en",
  "datePublished": "2025-04-14T09:37:42+08:00",
  "dateModified": "2025-04-14T09:37:42+08:00",
  "author":{
    "@type": "Person",
    "name": "Signal Yu"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/devops/docker/1-docker/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Signal's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://signalyu.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://signalyu.github.io/" accesskey="h" title="Signal&#39;s Blog (Alt + H)">
                <img src="https://signalyu.github.io/apple-touch-icon.png" alt="" aria-label="logo"
                    height="40">Signal&#39;s Blog</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://signalyu.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://signalyu.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://signalyu.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://signalyu.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://signalyu.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Docker
    </h1>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction-to-docker" aria-label="Introduction to Docker">Introduction to Docker</a></li>
                <li>
                    <a href="#docker-architecture" aria-label="Docker Architecture">Docker Architecture</a></li>
                <li>
                    <a href="#common-docker-commands" aria-label="Common Docker Commands">Common Docker Commands</a><ul>
                        
                <li>
                    <a href="#basic-commands" aria-label="Basic Commands">Basic Commands</a></li>
                <li>
                    <a href="#docker-image-commands" aria-label="Docker Image Commands">Docker Image Commands</a></li>
                <li>
                    <a href="#docker-container-commands" aria-label="Docker Container Commands">Docker Container Commands</a></li></ul>
                </li>
                <li>
                    <a href="#docker-images" aria-label="Docker Images">Docker Images</a></li>
                <li>
                    <a href="#docker-volumes" aria-label="Docker Volumes">Docker Volumes</a></li>
                <li>
                    <a href="#installing-software-in-docker" aria-label="Installing Software in Docker">Installing Software in Docker</a><ul>
                        
                <li>
                    <a href="#search-image-versions" aria-label="Search Image Versions">Search Image Versions</a></li>
                <li>
                    <a href="#tomcat" aria-label="Tomcat">Tomcat</a></li>
                <li>
                    <a href="#mysql" aria-label="MySQL">MySQL</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="introduction-to-docker">Introduction to Docker<a hidden class="anchor" aria-hidden="true" href="#introduction-to-docker">#</a></h1>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <p><strong>Docker</strong> was developed to address the challenges of software deployment across various environments by providing a lightweight, consistent, and portable solution. Prior to Docker, developers often faced issues like &ldquo;it works on my machine, but not in production,&rdquo; caused by inconsistencies in dependencies, libraries, and configurations. Docker resolves this by containerizing applications, ensuring they run uniformly across any infrastructure. Its primary goal is to simplify development, testing, and deployment by encapsulating applications and their dependencies into isolated, reproducible containers. These containers are user-space instances that package code, runtime, system tools, and libraries, ensuring consistency across environments.</p>
<p>The key difference between Docker and Virtual Machines (VMs) lies in their architecture. VMs emulate entire hardware stacks, requiring a full operating system for each instance, which results in significant overhead. In contrast, Docker uses containers that share the host OS kernel, offering a more lightweight and efficient solution by isolating applications at the process level. <img loading="lazy" src="/img/docker/1-docker-vms.png" alt="Virtual Machines vs. Docker"  />
</p>
<p>Docker has three core components: <strong>images</strong>, <strong>containers</strong>, and <strong>registries</strong>. <strong>Images</strong> are read-only templates that contain application code and dependencies. <strong>Containers</strong> are runnable instances of these images; they are isolated, lightweight, and ephemeral. <strong>Registries</strong> are repositories that store and share Docker images.
<img loading="lazy" src="/img/docker/2-docker-core-components.png" alt="Docker Core Components"  />
</p>

</details></p>

<hr>
<h1 id="docker-architecture">Docker Architecture<a hidden class="anchor" aria-hidden="true" href="#docker-architecture">#</a></h1>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <p>Docker follows a Client/Server (C/S) architecture with a loosely coupled backend where various components perform specific functions. The basic workflow of Docker is as follows:
<img loading="lazy" src="/img/docker/3-docker-architecture-2.png" alt="Docker Architecture"  />
</p>
<ol>
<li><strong>Docker Client</strong>: The user interacts with the Docker Client, which communicates with the Docker Daemon to send requests.</li>
<li><strong>Docker Daemon</strong>: This is the core component of Docker&rsquo;s architecture. It provides the Docker Server functionality, enabling it to accept requests from the Docker Client.</li>
<li><strong>Docker Engine</strong>: The Docker Engine executes a series of internal tasks. Each task is represented as a &ldquo;Job.&rdquo;</li>
<li><strong>Job Execution</strong>: Each Job performs a specific function, such as building an image, starting a container, or managing storage.</li>
<li><strong>Graph Driver</strong>: If a Job requires a container image, the Engine fetches it from a Docker Registry. The Graph driver stores the downloaded image as a Graph (a layered filesystem) and manages its dependencies.</li>
<li><strong>Network Creation</strong>: When a network environment needs to be created for Docker, the Network Driver is used to create and configure the network for Docker containers.</li>
<li><strong>Resource Management and Execution</strong>: If Docker needs to limit resources or execute user commands within containers, the Exec Driver is responsible for completing these operations.</li>
<li><strong>Libcontainer</strong>: Libcontainer is an independent container management package. Both the Network Driver and the Exec Driver rely on Libcontainer to perform specific container management operations.</li>
</ol>
</details></p>

<hr>
<h1 id="common-docker-commands">Common Docker Commands<a hidden class="anchor" aria-hidden="true" href="#common-docker-commands">#</a></h1>
<h2 id="basic-commands">Basic Commands<a hidden class="anchor" aria-hidden="true" href="#basic-commands">#</a></h2>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <ul>
<li><strong>Start/Stop/Restart Docker</strong>:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl start docker
</span></span><span style="display:flex;"><span>sudo systemctl stop docker
</span></span><span style="display:flex;"><span>sudo systemctl restart docker
</span></span></code></pre></div></li>
<li><strong>View Docker Status</strong>:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl status docker
</span></span></code></pre></div></li>
<li><strong>View Docker Info</strong>:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker info
</span></span></code></pre></div></li>
<li><strong>View Docker Help Documentation</strong>:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker --help
</span></span></code></pre></div></li>
<li><strong>View Docker Version</strong>:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker -v
</span></span></code></pre></div></li>
</ul>

</details></p>

<hr>
<h2 id="docker-image-commands">Docker Image Commands<a hidden class="anchor" aria-hidden="true" href="#docker-image-commands">#</a></h2>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <ul>
<li><strong>Search for a Docker Image</strong>: <code>docker search &lt;image_name&gt;</code>
<ul>
<li><code>docker search nginx</code></li>
</ul>
</li>
<li><strong>Pull a Docker Image</strong>: <code>docker pull &lt;image_name&gt;</code>
<ul>
<li><code>docker pull nginx</code></li>
</ul>
</li>
<li><strong>List Docker Images</strong>: <code>docker images</code>
<ul>
<li><code>docker image ls</code></li>
</ul>
</li>
<li><strong>Inspect a Docker Image</strong>: <code>docker inspect &lt;image_name_or_id&gt;</code>
<ul>
<li><code>docker inspect nginx</code></li>
</ul>
</li>
<li><strong>Tag a Docker Image</strong>: <code>docker tag &lt;image_id_or_name&gt; &lt;new_image_name&gt;:&lt;new_tag&gt;</code>
<ul>
<li><code>docker tag nginx:latest nginx:1.27.4</code></li>
</ul>
</li>
<li><strong>Remove a Docker Image</strong>: <code>docker rmi &lt;image_name_or_id&gt;</code>
<ul>
<li><code>docker rmi nignx:1.27.4</code></li>
</ul>
</li>
<li><strong>Build a Docker Image</strong>: <code>docker build -t &lt;image_name&gt;:&lt;tag&gt; &lt;path_to_dockerfile&gt;</code>
<ul>
<li><code>docker build -t myapp:latest .</code></li>
</ul>
</li>
<li><strong>Save a Docker Image to a File</strong>: <code>docker save -o &lt;output_file_name&gt;.tar &lt;image_name&gt;:&lt;tag&gt;</code>
<ul>
<li><code>docker save -o myapp.tar myapp:latest</code></li>
</ul>
</li>
<li><strong>Load a Docker Image from a File</strong>: <code>docker load -i &lt;file_name&gt;.tar</code>
<ul>
<li><code>docker load -i myapp.tar</code></li>
</ul>
</li>
<li><strong>Prune Unused Docker Images</strong>: <code>docker image prune</code>
<ul>
<li><code>docker image prune -a</code></li>
</ul>
</li>
</ul>

</details></p>

<hr>
<h2 id="docker-container-commands">Docker Container Commands<a hidden class="anchor" aria-hidden="true" href="#docker-container-commands">#</a></h2>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <ul>
<li><strong><code>docker run</code></strong>: Create and start a new container
<ul>
<li><code>docker run -it -p 8080:8080 --name tomcat9 tomcat:9-jre17 /bin/bash</code>: Start a new container from the <code>tomcat:9-jre17</code> image, name it <code>tomcat9</code>, map port <code>8080</code> inside the container to port <code>8080</code> on the host, and open an interactive bash shell inside the container.</li>
</ul>
</li>
<li><strong><code>docker ps</code></strong>: List all currently running containers
<ul>
<li><code>docker ps</code>: List containers that are currently running.</li>
<li><code>docker ps -a</code>: List all containers.</li>
</ul>
</li>
<li><strong><code>docker start &lt;container_id_or_name&gt;</code></strong>: Start a stopped container
<ul>
<li><code>docker start my_container</code>: Start a container with the name <code>my_container</code>.</li>
</ul>
</li>
<li><strong><code>docker restart &lt;container_id_or_name&gt;</code></strong>: Restart a container
<ul>
<li><code>docker restart my_container</code>: Restart the container named <code>my_container</code>.</li>
</ul>
</li>
<li><strong><code>docker stop &lt;container_id_or_name&gt;</code></strong>: Stop a running container
<ul>
<li><code>docker stop my_container</code>: Stop the container named <code>my_container</code>.</li>
</ul>
</li>
<li><strong><code>docker kill &lt;container_id_or_name&gt;</code></strong>: Force stop a running container
<ul>
<li><code>docker kill my_container</code>: Force stop the container named <code>my_container</code>.</li>
</ul>
</li>
<li><strong><code>docker rm &lt;container_id_or_name&gt;</code></strong>: Remove a stopped container
<ul>
<li><code>docker rm my_container</code>: Remove the container named <code>my_container</code> after it has stopped.</li>
</ul>
</li>
<li><strong><code>docker run -d &lt;container_id_or_name&gt;</code></strong>: Start a container in detached mode (background)
<ul>
<li><code>docker run -d nginx</code>: Run the Nginx container in the background.</li>
</ul>
</li>
<li><strong><code>docker logs &lt;container_id_or_name&gt;</code></strong>: View logs of a container
<ul>
<li><code>docker logs my_container</code>: View logs for the container named <code>my_container</code>.</li>
</ul>
</li>
<li><strong><code>docker top &lt;container_id_or_name&gt;</code></strong>: View the running processes inside a container
<ul>
<li><code>docker top my_container</code>: Display the processes running inside <code>my_container</code>.</li>
</ul>
</li>
<li><strong><code>docker inspect &lt;container_id_or_name&gt;</code></strong>: Get detailed information about a container
<ul>
<li><code>docker inspect my_container</code>: Show detailed metadata about the container named <code>my_container</code>.</li>
</ul>
</li>
<li><strong><code>docker exec -it &lt;container_id_or_name&gt; &lt;command&gt;</code></strong>: Execute a command inside a running container (interactive mode)
<ul>
<li><code>docker exec -it my_container bash</code>: Open an interactive bash shell inside <code>my_container</code>.</li>
</ul>
</li>
<li><strong><code>exit</code></strong>: Exit from an interactive session inside a container
<ul>
<li><code>exit</code>: Exit the interactive shell of the container and return to the host.</li>
</ul>
</li>
<li><strong><code>docker cp &lt;container_id_or_name&gt;:&lt;path_in_container&gt; &lt;path_on_host&gt;</code></strong>: Copy files from a container to the host
<ul>
<li><code>docker cp my_container:/app/file.txt /host/directory/</code>: Copy <code>file.txt</code> from the container to the host.</li>
</ul>
</li>
</ul>

</details></p>

<hr>
<h1 id="docker-images">Docker Images<a hidden class="anchor" aria-hidden="true" href="#docker-images">#</a></h1>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <blockquote>
<p>A <strong>Docker image</strong> is a read-only template used to create containers. It is composed of several layers stacked on top of each other, with each layer representing a <strong>snapshot</strong> of the filesystem at a specific point in time. These snapshots capture modifications made by Docker instructions (such as installing a package, copying files, or modifying configurations). Layers are created during the execution of commands in a <strong>Dockerfile</strong> or when using a pre-existing image to build a new one.</p>
</blockquote>
<blockquote>
<p>Docker leverages <strong>UnionFS</strong> to efficiently manage these layers, allowing it to present a unified view of the container&rsquo;s filesystem. This approach helps optimize storage and performance, as common layers can be shared across different images. <img loading="lazy" src="/img/docker/4-docker-layered-image.webp" alt="Docker layered Image"  />
</p>
</blockquote>
<blockquote>
<p>Here is a simple example of creating an image using a <strong>Dockerfile</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>FROM ubuntu  <span style="color:#75715e"># This layer contains the base Ubuntu image</span>
</span></span><span style="display:flex;"><span>RUN apt-get update  <span style="color:#75715e"># This layer contains the updated package list</span>
</span></span><span style="display:flex;"><span>COPY . /app  <span style="color:#75715e"># This layer contains the application files copied into /app</span>
</span></span><span style="display:flex;"><span>CMD <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;python&#34;</span>, <span style="color:#e6db74">&#34;/app/app.py&#34;</span><span style="color:#f92672">]</span>  <span style="color:#75715e"># This layer contains the command to run the application when the container starts</span>
</span></span></code></pre></div></blockquote>
<blockquote>
<p>Docker provides the <code>docker commit</code> command, which allows creating a new image based on the changes made to a running container. It is similar to taking a snapshot of the container&rsquo;s current state. Below is a real-world example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Run a container from a base image</span>
</span></span><span style="display:flex;"><span>docker run -it ubuntu /bin/bash  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Make changes inside the container</span>
</span></span><span style="display:flex;"><span>apt-get update
</span></span><span style="display:flex;"><span>apt-get install -y vim
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Commit the container to create a new image</span>
</span></span><span style="display:flex;"><span>docker commit &lt;container_id&gt; my-ubuntu-image
</span></span></code></pre></div></blockquote>

</details></p>

<hr>
<h1 id="docker-volumes">Docker Volumes<a hidden class="anchor" aria-hidden="true" href="#docker-volumes">#</a></h1>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <blockquote>
<p>A <strong>Docker volume</strong> is a persistent storage mechanism designed to store data outside of a container&rsquo;s filesystem. Volumes are stored on the host machine and can be shared and reused across multiple containers. They are particularly useful for overcoming the ephemeral nature of container filesystems, ensuring that data persists even when containers are stopped, removed, or replaced.
<img loading="lazy" src="/img/docker/5-docker-volumes.png" alt="Docker Volumes"  />

Below are some example use cases:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Create a named volume (stored in /var/lib/docker/volumes/mysql_data on the host)</span>
</span></span><span style="display:flex;"><span>docker volume create mysql_data  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run a MySQL container, mounting the volume to store data persistently (default is rw for read-write)</span>
</span></span><span style="display:flex;"><span>docker run -d --name mysql1 -v mysql_data:/var/lib/mysql mysql  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run a container with a read-only volume mount, preventing modifications to the config files</span>
</span></span><span style="display:flex;"><span>docker run -d --name myapp -v /tmp/config:/app/config:ro myapp  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use --volumes-from to mount the volume from mysql1 into mysql2, sharing data between the containers</span>
</span></span><span style="display:flex;"><span>docker run -d --volumes-from mysql1 --name mysql2 mysql
</span></span></code></pre></div></blockquote>
</details></p>

<hr>
<h1 id="installing-software-in-docker">Installing Software in Docker<a hidden class="anchor" aria-hidden="true" href="#installing-software-in-docker">#</a></h1>
<h2 id="search-image-versions">Search Image Versions<a hidden class="anchor" aria-hidden="true" href="#search-image-versions">#</a></h2>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <ol>
<li><code>vim ~/.bashrc</code>:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Search docker image versions</span>
</span></span><span style="display:flex;"><span>dkr_image_versions<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Usage: dkr_image_versions &lt;image_name&gt; [limit]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fetches version tags from Docker Hub for a given image, sorted by version number</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Default shows all versions, optional limit controls output count</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>local image_name<span style="color:#f92672">=</span>$1
</span></span><span style="display:flex;"><span>local limit<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>2<span style="color:#66d9ef">:-</span>0<span style="color:#e6db74">}</span>  <span style="color:#75715e"># Default 0 (show all), if not provided</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Validate input</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span>$image_name<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>   echo <span style="color:#e6db74">&#34;Error: Image name not specified&#34;</span> &gt;&amp;<span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>   echo <span style="color:#e6db74">&#34;Usage: dkr_image_versions &lt;image_name&gt; [limit]&#34;</span> &gt;&amp;<span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fetch and process versions</span>
</span></span><span style="display:flex;"><span>versions<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s <span style="color:#e6db74">&#34;https://hub.docker.com/v2/repositories/library/</span>$<span style="color:#e6db74">   {image_name}/tags/?page_size=100&#34;</span> | <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   jq -r <span style="color:#e6db74">&#39;.results[].name&#39;</span> | <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   grep -E <span style="color:#e6db74">&#39;^[0-9]+\.*&#39;</span> | <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   sort -rV<span style="color:#66d9ef">)</span>  <span style="color:#75715e"># Reverse version sort (newest first)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Handle empty results</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span>$versions<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>   echo <span style="color:#e6db74">&#34;No version tags found for image: </span><span style="color:#e6db74">${</span>image_name<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> &gt;&amp;<span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply limit if specified</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$limit<span style="color:#e6db74">&#34;</span> -gt <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>   echo <span style="color:#e6db74">&#34;</span>$versions<span style="color:#e6db74">&#34;</span> | head -n <span style="color:#e6db74">&#34;</span>$limit<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>   echo <span style="color:#e6db74">&#34;</span>$versions<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
<li><code>source ~/.bashrc</code></li>
<li><code>dkr_image_versions ubuntu [number]</code></li>
</ol>

</details></p>

<hr>
<h2 id="tomcat">Tomcat<a hidden class="anchor" aria-hidden="true" href="#tomcat">#</a></h2>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <p><img loading="lazy" src="/img/docker/6-docker-host-port-mapping.png" alt="Host Docker Port Mapping"  />
</p>
<ol>
<li>Run the Tomcat container with interactive shell: <code>docker run -p 8080:8080 --name tomcat2 -it tomcat:9-jre17 /bin/bash</code></li>
<li>Remove the webapps directory: <code>rm -r webapps</code></li>
<li>Rename webapps.dist to webapps: <code>mv webapps.dist webapps</code></li>
<li>Start Tomcat in the background: <code>./bin/catalina.sh run &amp;</code></li>
<li>Open port 8080 in the firewall: <code>sudo firewall-cmd --permanent --add-port=8080/tcp</code></li>
<li>Reload the firewall configuration to apply changes: <code>sudo firewall-cmd --reload</code></li>
</ol>
</details></p>

<h2 id="mysql">MySQL<a hidden class="anchor" aria-hidden="true" href="#mysql">#</a></h2>


<p><details >
  <summary markdown="span">SHOW CONTENTS</summary>
  <ol>
<li>Create Volumes for Log, Data, and Config:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker volume create mysql_data      <span style="color:#75715e"># Volume for MySQL data</span>
</span></span><span style="display:flex;"><span>docker volume create mysql_log       <span style="color:#75715e"># Volume for MySQL logs</span>
</span></span><span style="display:flex;"><span>docker volume create mysql_conf      <span style="color:#75715e"># Volume for MySQL configuration</span>
</span></span></code></pre></div></li>
<li>Run MySQL Container with Volumes:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --name mysql <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -e MYSQL_ROOT_PASSWORD<span style="color:#f92672">=</span>my-secret-pw <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -p 3306:3306 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v mysql_data:/var/lib/mysql <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v mysql_log:/var/log/mysql <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v mysql_conf:/etc/mysql/conf.d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  mysql:latest
</span></span></code></pre></div></li>
<li>Configure MySQL (Optional)
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Optional: Copy custom config file to the volume </span>
</span></span><span style="display:flex;"><span>cp my.cnf /var/lib/docker/volumes/mysql_conf/
</span></span></code></pre></div></li>
<li>Access MySQL:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker exec -it mysql mysql -u root -p
</span></span></code></pre></div></li>
</ol>

</details></p>



  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://signalyu.github.io/tags/engineering--technology/">Engineering &amp; Technology</a></li>
      <li><a href="https://signalyu.github.io/tags/computer-science/">Computer Science</a></li>
      <li><a href="https://signalyu.github.io/tags/devops/">DevOps</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/linux/1-red-hat-enterprise-linux/">
    <span class="title">« PREV</span>
    
    <br>
    <span>Red Hat Enterprise Linux</span>
  </a>
  <a class="next" href="https://signalyu.github.io/posts/3-humanities/personal-growth/practice/area-for-improvement/japanese/1-area-for-improvement/">
    <span class="title">NEXT »</span>
    
    <br>
    <span>Areas For Improvement</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://signalyu.github.io/">Signal&#39;s Blog</a></span> · 
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

</body>
</html>
