<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Design Patterns | Signal&#39;s Blog</title>
<meta name="keywords" content="Design Patterns">
<meta name="description" content="1. Solid Principle 1.1 Single Responsibility Principle A class should have only one reason to change, meaning each class should focus on a single functionality or responsibility.
SHOW CODE Single Responsibility Principle import java.io.IOException; import java.util.*; import java.util.regex.*; import com.fasterxml.jackson.databind.ObjectMapper; /** * 1. User class is only used to represent entity. * 2. UserValidator class is solely responsible for validating user objects. * 3. Store class is only used to manage user objects storage.">
<meta name="author" content="Signal Yu">
<link rel="canonical" href="https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/design-patterns/1-design-patterns/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.9ddf6c021b47a5a861a7c6af241af938775e0fc65a762930d3a2426fc59e9a5c.css" integrity="sha256-nd9sAhtHpahhp8avJBr5OHdeD8Zadikw06JCb8Wemlw=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://signalyu.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://signalyu.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://signalyu.github.io/favicon-32x32">
<link rel="apple-touch-icon" href="https://signalyu.github.io/apple-touch-icon">
<link rel="mask-icon" href="https://signalyu.github.io/favicon.io">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/design-patterns/1-design-patterns/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css"
    integrity="sha384-wcIxkf4k558AjM3Yz3BBFQUbk/zgIYC2R0QpeeYb+TwlBVMrlgLqwRjRtGZiK7ww" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"
    integrity="sha384-hIoBPJpTUs74ddyc4bFZSM1TVlQDA60VBbJS0oA934VSz82sBx1X7kSx2ATBDIyd"
    crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"
    integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk"
    crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body, {
            
            
            delimiters: [
                { left: '$$', right: '$$', display: true },
                { left: '$', right: '$', display: false },
                { left: '\\(', right: '\\)', display: false },
                { left: '\\[', right: '\\]', display: true }
            ],
            
            throwOnError: false,
            strict: false
        });
    });
</script>

  

<meta property="og:title" content="Design Patterns" />
<meta property="og:description" content="1. Solid Principle 1.1 Single Responsibility Principle A class should have only one reason to change, meaning each class should focus on a single functionality or responsibility.
SHOW CODE Single Responsibility Principle import java.io.IOException; import java.util.*; import java.util.regex.*; import com.fasterxml.jackson.databind.ObjectMapper; /** * 1. User class is only used to represent entity. * 2. UserValidator class is solely responsible for validating user objects. * 3. Store class is only used to manage user objects storage." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/design-patterns/1-design-patterns/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-11-12T14:38:17+08:00" />
<meta property="article:modified_time" content="2024-11-12T14:38:17+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Design Patterns"/>
<meta name="twitter:description" content="1. Solid Principle 1.1 Single Responsibility Principle A class should have only one reason to change, meaning each class should focus on a single functionality or responsibility.
SHOW CODE Single Responsibility Principle import java.io.IOException; import java.util.*; import java.util.regex.*; import com.fasterxml.jackson.databind.ObjectMapper; /** * 1. User class is only used to represent entity. * 2. UserValidator class is solely responsible for validating user objects. * 3. Store class is only used to manage user objects storage."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://signalyu.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Design Patterns",
      "item": "https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/design-patterns/1-design-patterns/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Design Patterns",
  "name": "Design Patterns",
  "description": "1. Solid Principle 1.1 Single Responsibility Principle A class should have only one reason to change, meaning each class should focus on a single functionality or responsibility.\nSHOW CODE Single Responsibility Principle import java.io.IOException; import java.util.*; import java.util.regex.*; import com.fasterxml.jackson.databind.ObjectMapper; /** * 1. User class is only used to represent entity. * 2. UserValidator class is solely responsible for validating user objects. * 3. Store class is only used to manage user objects storage.",
  "keywords": [
    "Design Patterns"
  ],
  "articleBody": "1. Solid Principle 1.1 Single Responsibility Principle A class should have only one reason to change, meaning each class should focus on a single functionality or responsibility.\nSHOW CODE Single Responsibility Principle import java.io.IOException; import java.util.*; import java.util.regex.*; import com.fasterxml.jackson.databind.ObjectMapper; /** * 1. User class is only used to represent entity. * 2. UserValidator class is solely responsible for validating user objects. * 3. Store class is only used to manage user objects storage. * 4. UserPersistenceService class is dedicated to save the user data. * 5. UserController is solely used to handle incoming requests (in this case, creating users form JSON input). */ /* com.fasterxml.jackson.core jackson-databind 2.18.0 */ /** * Represents a user with basic details. * User class is only used to represent entity. */ class User { private String name; private String email; private String address; public User() {} public User(String name, String email, String address) { this.name = name; this.email = email; this.address = address; } // Getters and setters public String getName() { return name; } public void setName(String name) { this.name = name; } public String getEmail() { return email; } public void setEmail(String email) { this.email = email; } public String getAddress() { return address; } public void setAddress(String address) { this.address = address; } @Override public String toString() { return \"User [name=\" + name + \", email=\" + email + \", address=\" + address + \"]\"; } } /** * Handles incoming JSON requests that work on User. * UserController is solely used to handle incoming requests (in this case, creating users form JSON input). */ class UserController { private final UserPersistenceService persistenceService = new UserPersistenceService(); public String createUser(String userJson) throws IOException { ObjectMapper mapper = new ObjectMapper(); User user = mapper.readValue(userJson, User.class); UserValidator validator = new UserValidator(); if (!validator.validateUser(user)) { return \"ERROR\"; } persistenceService.saveUser(user); return \"SUCCESS\"; } } /** * Handles persistence of User objects. * UserPersistenceService class is dedicated to save the user data. */ class UserPersistenceService { private final Store store = new Store(); public void saveUser(User user) { store.store(user); } } /** * Validates User data. * UserValidator class is solely responsible for validating user objects. */ class UserValidator { public boolean validateUser(User user) { if (!isPresent(user.getName()) || !isValidAlphaNumeric(user.getName())) { return false; } user.setName(user.getName().trim()); user.setEmail(user.getEmail().trim()); return isValidEmail(user.getEmail()); } private boolean isPresent(String value) { return value != null \u0026\u0026 value.trim().length() \u003e 0; } private boolean isValidAlphaNumeric(String value) { Pattern pattern = Pattern.compile(\"[^A-Za-z0-9]\"); Matcher matcher = pattern.matcher(value); return !matcher.find(); } private boolean isValidEmail(String value) { Pattern pattern = Pattern.compile(\"^[\\\\w-\\\\.]+@[\\\\w-]+(\\\\.[\\\\w-]+)+$\"); Matcher matcher = pattern.matcher(value); return matcher.find(); } } /** * Stores User data in memory. * Store class is only used to manage user objects storage. */ class Store { private static final Map STORAGE = new HashMap\u003c\u003e(); public void store(User user) { synchronized (STORAGE) { STORAGE.put(user.getName(), user); } } public User getUser(String name) { synchronized (STORAGE) { return STORAGE.get(name); } } } /** * Main class for demonstrating the Single Responsibility Principle. */ public class Main { private static final String VALID_USER_JSON = \"{\\\"name\\\": \\\"Signal\\\", \\\"email\\\": \\\"signalyu999@gmail.com\\\", \\\"address\\\":\\\"999 Sugar lane\\\"}\"; private static final String INVALID_USER_JSON = \"{\\\"name\\\": \\\"Sam\\\", \\\"email\\\": \\\"sam@email\\\", \\\"address\\\":\\\"111 Sugar lane\\\"}\"; public static void main(String[] args) throws IOException { UserController controller = new UserController(); String response = controller.createUser(VALID_USER_JSON); System.out.println(\"Valid JSON response: \" + response); response = controller.createUser(INVALID_USER_JSON); System.out.println(\"Invalid JSON response: \" + response); } } Each class in the above code strictly adheres to the Single Responsibility Principle by focusing on a specific responsibility:\nUser for representing the user entity UserController for request handling UserPersistenceService for data persistence UserValidator for user data validation Store for managing in-memory data storage --- title: Single Responsibility Principle - Class Diagram --- classDiagram class User { - String name - String email - String address + String toString() } class Store { + void store(User user) + User getUser(String name) } class UserPersistenceService { + void saveUser(User user) } class UserValidator { - boolean isPresent(String value) - boolean isValidAlphaNumeric(String value) - boolean isValidEmail(String value) + boolean validateUser(User user) } class UserController { + String createUser(String userJson) } class Main { + void main(String[] args) } User --* Store Store --* UserPersistenceService UserPersistenceService --* UserController UserController --\u003e UserValidator : create Main --\u003e UserController : create 1.2 Open-Closed Principle A software entity (class, module, function, etc.) should be open for extension but closed for modification.\n点击查看代码 Java import java.time.LocalDateTime; import java.util.*; // Abstract base class, closed for modification but open for extension abstract class Subscriber { protected Long subscriberId; protected String address; protected Long phoneNumber; protected int baseRate; // Getter and Setter methods public Long getSubscriberId() { return subscriberId; } public void setSubscriberId(Long subscriberId) { this.subscriberId = subscriberId; } public String getAddress() { return address; } public void setAddress(String address) { this.address = address; } public Long getPhoneNumber() { return phoneNumber; } public void setPhoneNumber(Long phoneNumber) { this.phoneNumber = phoneNumber; } public int getBaseRate() { return baseRate; } public void setBaseRate(int baseRate) { this.baseRate = baseRate; } // Abstract method to calculate the bill; implementation is defined in subclasses public abstract double calculateBill(); } // PhoneSubscriber class extends Subscriber, calculates the phone bill class PhoneSubscriber extends Subscriber { @Override public double calculateBill() { List calls = CallHistory.getCurrentCalls(subscriberId); long totalDuration = calls.stream().mapToLong(CallHistory.Call::getDuration).sum(); return (totalDuration * baseRate) / 100.0; } } // ISPSubscriber class extends Subscriber, calculates the internet bill class ISPSubscriber extends Subscriber { private long freeUsage; // Free usage limit in data units @Override public double calculateBill() { List sessions = InternetSessionHistory.getCurrentSessions(subscriberId); long totalData = sessions.stream().mapToLong(InternetSessionHistory.InternetSession::getDataUsed).sum(); long chargeableData = totalData - freeUsage; return chargeableData \u003c= 0 ? 0 : (chargeableData * baseRate) / 100.0; } public long getFreeUsage() { return freeUsage; } public void setFreeUsage(long freeUsage) { this.freeUsage = freeUsage; } } // InternetSessionHistory class to manage internet usage records class InternetSessionHistory { public static class InternetSession { private final LocalDateTime begin; private final Long subscriberId; private final Long dataUsed; public InternetSession(Long subscriberId, LocalDateTime begin, long dataUsed) { this.subscriberId = subscriberId; this.begin = begin; this.dataUsed = dataUsed; } public LocalDateTime getBegin() { return begin; } public long getDataUsed() { return dataUsed; } public Long getSubscriberId() { return subscriberId; } } private static final Map",
  "wordCount" : "8026",
  "inLanguage": "en",
  "datePublished": "2024-11-12T14:38:17+08:00",
  "dateModified": "2024-11-12T14:38:17+08:00",
  "author":{
    "@type": "Person",
    "name": "Signal Yu"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/design-patterns/1-design-patterns/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Signal's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://signalyu.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://signalyu.github.io/" accesskey="h" title="Signal&#39;s Blog (Alt + H)">
                <img src="https://signalyu.github.io/apple-touch-icon.png" alt="" aria-label="logo"
                    height="40">Signal&#39;s Blog</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://signalyu.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://signalyu.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://signalyu.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://signalyu.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://signalyu.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Design Patterns
    </h1>
    <div class="post-meta"><span title='2024-11-12 14:38:17 +0800 HKT'>Nov 12 2024</span>&nbsp;·&nbsp;Signal Yu

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1-solid-principle" aria-label="1. Solid Principle">1. Solid Principle</a><ul>
                        
                <li>
                    <a href="#11-single-responsibility-principle" aria-label="1.1 Single Responsibility Principle">1.1 Single Responsibility Principle</a></li>
                <li>
                    <a href="#12-open-closed-principle" aria-label="1.2 Open-Closed Principle">1.2 Open-Closed Principle</a></li>
                <li>
                    <a href="#13-liskov-substitution-principle" aria-label="1.3 Liskov Substitution Principle">1.3 Liskov Substitution Principle</a></li>
                <li>
                    <a href="#14-interface-segregation-principle" aria-label="1.4 Interface Segregation Principle">1.4 Interface Segregation Principle</a></li>
                <li>
                    <a href="#15-dependency-inversion-principle" aria-label="1.5 Dependency Inversion Principle">1.5 Dependency Inversion Principle</a></li></ul>
                </li>
                <li>
                    <a href="#2-creational-design-patterns" aria-label="2. Creational Design Patterns">2. Creational Design Patterns</a><ul>
                        
                <li>
                    <a href="#21-builder" aria-label="2.1 Builder">2.1 Builder</a><ul>
                        
                <li>
                    <a href="#summary" aria-label="Summary">Summary</a></li></ul>
                </li>
                <li>
                    <a href="#22-simple-factory" aria-label="2.2 Simple Factory">2.2 Simple Factory</a></li>
                <li>
                    <a href="#23-factory-method" aria-label="2.3 Factory Method">2.3 Factory Method</a></li>
                <li>
                    <a href="#24-prototype" aria-label="2.4 Prototype">2.4 Prototype</a></li>
                <li>
                    <a href="#25-abstract-factory" aria-label="2.5 Abstract Factory">2.5 Abstract Factory</a></li>
                <li>
                    <a href="#26-singleton" aria-label="2.6 Singleton">2.6 Singleton</a></li>
                <li>
                    <a href="#27-object-pool" aria-label="2.7 Object Pool">2.7 Object Pool</a></li></ul>
                </li>
                <li>
                    <a href="#3-structural-design-patterns" aria-label="3. Structural Design Patterns">3. Structural Design Patterns</a><ul>
                        
                <li>
                    <a href="#31-adapter" aria-label="3.1 Adapter">3.1 Adapter</a></li>
                <li>
                    <a href="#32-bridge" aria-label="3.2 Bridge">3.2 Bridge</a></li>
                <li>
                    <a href="#33-decorator" aria-label="3.3 Decorator">3.3 Decorator</a></li>
                <li>
                    <a href="#34-composite" aria-label="3.4 Composite">3.4 Composite</a></li>
                <li>
                    <a href="#35-facade" aria-label="3.5 Facade">3.5 Facade</a></li>
                <li>
                    <a href="#36-flyweight" aria-label="3.6 Flyweight">3.6 Flyweight</a></li>
                <li>
                    <a href="#37-proxy" aria-label="3.7 Proxy">3.7 Proxy</a></li></ul>
                </li>
                <li>
                    <a href="#4-behavioral-design-patterns" aria-label="4. Behavioral Design Patterns">4. Behavioral Design Patterns</a><ul>
                        
                <li>
                    <a href="#41-chain-of-responsibility" aria-label="4.1 Chain of Responsibility">4.1 Chain of Responsibility</a></li>
                <li>
                    <a href="#42-command" aria-label="4.2 Command">4.2 Command</a></li>
                <li>
                    <a href="#43-interpreter" aria-label="4.3 Interpreter">4.3 Interpreter</a></li>
                <li>
                    <a href="#44-mediator" aria-label="4.4 Mediator">4.4 Mediator</a></li>
                <li>
                    <a href="#45-iterator" aria-label="4.5 Iterator">4.5 Iterator</a></li>
                <li>
                    <a href="#46-momento" aria-label="4.6 Momento">4.6 Momento</a></li>
                <li>
                    <a href="#47-observer" aria-label="4.7 Observer">4.7 Observer</a></li>
                <li>
                    <a href="#48-state" aria-label="4.8 State">4.8 State</a></li>
                <li>
                    <a href="#49-strategy" aria-label="4.9 Strategy">4.9 Strategy</a></li>
                <li>
                    <a href="#410-template-method" aria-label="4.10 Template Method">4.10 Template Method</a></li>
                <li>
                    <a href="#411-visitor" aria-label="4.11 Visitor">4.11 Visitor</a></li>
                <li>
                    <a href="#412-null-object" aria-label="4.12 Null Object">4.12 Null Object</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="1-solid-principle">1. Solid Principle<a hidden class="anchor" aria-hidden="true" href="#1-solid-principle">#</a></h1>
<h2 id="11-single-responsibility-principle">1.1 Single Responsibility Principle<a hidden class="anchor" aria-hidden="true" href="#11-single-responsibility-principle">#</a></h2>
<blockquote>
<p><strong>A class should have only one reason to change</strong>, meaning each class should focus on a single functionality or responsibility.</p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Single Responsibility Principle</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.io.IOException;
import java.util.*;
import java.util.regex.*;
import com.fasterxml.jackson.databind.ObjectMapper;

/**
 * 1. User class is only used to represent entity.
 * 2. UserValidator class is solely responsible for validating user objects.
 * 3. Store class is only used to manage user objects storage.
 * 4. UserPersistenceService class is dedicated to save the user data.
 * 5. UserController is solely used to handle incoming requests (in this case, creating users form JSON input).
 */

/*
&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
    &lt;version&gt;2.18.0&lt;/version&gt;
&lt;/dependency&gt;
 */

/**
 * Represents a user with basic details.
 * User class is only used to represent entity.
 */
class User {
    private String name;
    private String email;
    private String address;

    public User() {}
    public User(String name, String email, String address) {
        this.name = name;
        this.email = email;
        this.address = address;
    }

    // Getters and setters
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
    public String getAddress() { return address; }
    public void setAddress(String address) { this.address = address; }

    @Override
    public String toString() {
        return "User [name=" + name + ", email=" + email + ", address=" + address + "]";
    }
}

/**
 * Handles incoming JSON requests that work on User.
 * UserController is solely used to handle incoming requests (in this case, creating users form JSON input).
 */
class UserController {
    private final UserPersistenceService persistenceService = new UserPersistenceService();

    public String createUser(String userJson) throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        User user = mapper.readValue(userJson, User.class);

        UserValidator validator = new UserValidator();
        if (!validator.validateUser(user)) {
            return "ERROR";
        }

        persistenceService.saveUser(user);
        return "SUCCESS";
    }
}

/**
 * Handles persistence of User objects.
 * UserPersistenceService class is dedicated to save the user data.
 */
class UserPersistenceService {
    private final Store store = new Store();

    public void saveUser(User user) {
        store.store(user);
    }
}

/**
 * Validates User data.
 * UserValidator class is solely responsible for validating user objects.
 */
class UserValidator {
    public boolean validateUser(User user) {
        if (!isPresent(user.getName()) || !isValidAlphaNumeric(user.getName())) {
            return false;
        }
        user.setName(user.getName().trim());
        user.setEmail(user.getEmail().trim());
        return isValidEmail(user.getEmail());
    }

    private boolean isPresent(String value) {
        return value != null && value.trim().length() > 0;
    }

    private boolean isValidAlphaNumeric(String value) {
        Pattern pattern = Pattern.compile("[^A-Za-z0-9]");
        Matcher matcher = pattern.matcher(value);
        return !matcher.find();
    }

    private boolean isValidEmail(String value) {
        Pattern pattern = Pattern.compile("^[\\w-\\.]+@[\\w-]+(\\.[\\w-]+)+$");
        Matcher matcher = pattern.matcher(value);
        return matcher.find();
    }
}

/**
 * Stores User data in memory.
 * Store class is only used to manage user objects storage.
 */
class Store {
    private static final Map&lt;String, User&gt; STORAGE = new HashMap&lt;&gt;();

    public void store(User user) {
        synchronized (STORAGE) {
            STORAGE.put(user.getName(), user);
        }
    }

    public User getUser(String name) {
        synchronized (STORAGE) {
            return STORAGE.get(name);
        }
    }
}

/**
 * Main class for demonstrating the Single Responsibility Principle.
 */
public class Main {
    private static final String VALID_USER_JSON = "{\"name\": \"Signal\", \"email\": \"signalyu999@gmail.com\", \"address\":\"999 Sugar lane\"}";
    private static final String INVALID_USER_JSON = "{\"name\": \"Sam\", \"email\": \"sam@email\", \"address\":\"111 Sugar lane\"}";

    public static void main(String[] args) throws IOException {
        UserController controller = new UserController();

        String response = controller.createUser(VALID_USER_JSON);
        System.out.println("Valid JSON response: " + response);

        response = controller.createUser(INVALID_USER_JSON);
        System.out.println("Invalid JSON response: " + response);
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<p>Each class in the above code strictly adheres to the <strong>Single Responsibility Principle</strong> by focusing on a specific responsibility:</p>
<ul>
<li><code>User</code> for representing the user entity</li>
<li><code>UserController</code> for request handling</li>
<li><code>UserPersistenceService</code> for data persistence</li>
<li><code>UserValidator</code> for user data validation</li>
<li><code>Store</code> for managing in-memory data storage</li>
</ul>
<pre class="mermaid">---
title: Single Responsibility Principle - Class Diagram
---
classDiagram
    class User {
        - String name
        - String email
        - String address
        + String toString()
    }

    class Store {
        + void store(User user)
        + User getUser(String name)
    }

    class UserPersistenceService {
        + void saveUser(User user)
    }

    class UserValidator {
        - boolean isPresent(String value)
        - boolean isValidAlphaNumeric(String value)
        - boolean isValidEmail(String value)
        + boolean validateUser(User user)
    }

    class UserController {
        + String createUser(String userJson)
    }

    class Main {
        + void main(String[] args)
    }

    User --* Store
    Store --* UserPersistenceService
    UserPersistenceService  --* UserController
    UserController --> UserValidator : create
    Main --> UserController : create
</pre>
<hr>
<h2 id="12-open-closed-principle">1.2 Open-Closed Principle<a hidden class="anchor" aria-hidden="true" href="#12-open-closed-principle">#</a></h2>
<blockquote>
<p><strong>A software entity (class, module, function, etc.) should be open for extension but closed for modification.</strong></p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>点击查看代码</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.time.LocalDateTime;
import java.util.*;

// Abstract base class, closed for modification but open for extension
abstract class Subscriber {

    protected Long subscriberId;
    protected String address;
    protected Long phoneNumber;
    protected int baseRate;

    // Getter and Setter methods
    public Long getSubscriberId() {
        return subscriberId;
    }

    public void setSubscriberId(Long subscriberId) {
        this.subscriberId = subscriberId;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public Long getPhoneNumber() {
        return phoneNumber;
    }

    public void setPhoneNumber(Long phoneNumber) {
        this.phoneNumber = phoneNumber;
    }

    public int getBaseRate() {
        return baseRate;
    }

    public void setBaseRate(int baseRate) {
        this.baseRate = baseRate;
    }

    // Abstract method to calculate the bill; implementation is defined in subclasses
    public abstract double calculateBill();
}

// PhoneSubscriber class extends Subscriber, calculates the phone bill
class PhoneSubscriber extends Subscriber {

    @Override
    public double calculateBill() {
        List&lt;CallHistory.Call&gt; calls = CallHistory.getCurrentCalls(subscriberId);
        long totalDuration = calls.stream().mapToLong(CallHistory.Call::getDuration).sum();
        return (totalDuration * baseRate) / 100.0;
    }
}

// ISPSubscriber class extends Subscriber, calculates the internet bill
class ISPSubscriber extends Subscriber {

    private long freeUsage; // Free usage limit in data units

    @Override
    public double calculateBill() {
        List&lt;InternetSessionHistory.InternetSession&gt; sessions = InternetSessionHistory.getCurrentSessions(subscriberId);
        long totalData = sessions.stream().mapToLong(InternetSessionHistory.InternetSession::getDataUsed).sum();
        long chargeableData = totalData - freeUsage;

        return chargeableData <= 0 ? 0 : (chargeableData * baseRate) / 100.0;
    }

    public long getFreeUsage() {
        return freeUsage;
    }

    public void setFreeUsage(long freeUsage) {
        this.freeUsage = freeUsage;
    }
}

// InternetSessionHistory class to manage internet usage records
class InternetSessionHistory {

    public static class InternetSession {
        private final LocalDateTime begin;
        private final Long subscriberId;
        private final Long dataUsed;

        public InternetSession(Long subscriberId, LocalDateTime begin, long dataUsed) {
            this.subscriberId = subscriberId;
            this.begin = begin;
            this.dataUsed = dataUsed;
        }

        public LocalDateTime getBegin() {
            return begin;
        }

        public long getDataUsed() {
            return dataUsed;
        }

        public Long getSubscriberId() {
            return subscriberId;
        }
    }

    private static final Map&lt;Long, List&lt;InternetSession&gt;&gt; SESSIONS = new HashMap&lt;&gt;();

    // Retrieves the current sessions for a subscriber, returns an empty list if none found
    public static synchronized List&lt;InternetSession&gt; getCurrentSessions(Long subscriberId) {
        return SESSIONS.getOrDefault(subscriberId, Collections.emptyList());
    }

    // Adds a new internet session record for a subscriber
    public static synchronized void addSession(Long subscriberId, LocalDateTime begin, long dataUsed) {
        SESSIONS.computeIfAbsent(subscriberId, k -> new LinkedList&lt;&gt;()).add(new InternetSession(subscriberId, begin, dataUsed));
    }
}

// CallHistory class to manage call records
class CallHistory {

    public static class Call {
        private final LocalDateTime begin;
        private final long duration;
        private final Long subscriberId;

        public Call(Long subscriberId, LocalDateTime begin, long duration) {
            this.subscriberId = subscriberId;
            this.begin = begin;
            this.duration = duration;
        }

        public LocalDateTime getBegin() {
            return begin;
        }

        public long getDuration() {
            return duration;
        }

        public Long getSubscriberId() {
            return subscriberId;
        }
    }

    private static final Map&lt;Long, List&lt;Call&gt; CALLS = new HashMap&lt;&gt;();

    // Retrieves the current calls for a subscriber, returns an empty list if none found
    public static synchronized List&lt;Call&gt; getCurrentCalls(Long subscriberId) {
        return CALLS.getOrDefault(subscriberId, Collections.emptyList());
    }

    // Adds a new call record for a subscriber
    public static synchronized void addSession(Long subscriberId, LocalDateTime begin, long duration) {
        CALLS.computeIfAbsent(subscriberId, k -> new LinkedList&lt;&gt;()).add(new Call(subscriberId, begin, duration));
    }
}

public class Main {

    public static void main(String[] args) {
        // Initialize PhoneSubscriber and ISPSubscriber with sample data
        PhoneSubscriber phoneSubscriber = new PhoneSubscriber();
        phoneSubscriber.setSubscriberId(1L);
        phoneSubscriber.setBaseRate(10);

        ISPSubscriber ispSubscriber = new ISPSubscriber();
        ispSubscriber.setSubscriberId(2L);
        ispSubscriber.setBaseRate(5);
        ispSubscriber.setFreeUsage(1000);

        // Add call records for PhoneSubscriber
        CallHistory.addSession(1L, LocalDateTime.now().minusMinutes(5), 300); // 300 seconds call
        CallHistory.addSession(1L, LocalDateTime.now().minusMinutes(10), 600); // 600 seconds call

        // Calculate and print the phone subscriber's bill
        double phoneBill = phoneSubscriber.calculateBill();
        System.out.println("Phone Subscriber's Bill: " + phoneBill);

        // Add internet session records for ISPSubscriber
        InternetSessionHistory.addSession(2L, LocalDateTime.now().minusHours(1), 500); // 500 data units
        InternetSessionHistory.addSession(2L, LocalDateTime.now().minusHours(2), 800); // 800 data units

        // Calculate and print the ISP subscriber's bill
        double ispBill = ispSubscriber.calculateBill();
        System.out.println("ISP Subscriber's Bill: " + ispBill);
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<p>The above code demonstrates the Open/Closed Principle (OCP) by separating the base <code>Subscriber</code> class from its specific implementations, <code>PhoneSubscriber</code> and <code>ISPSubscriber</code>, allowing for new functionalities to be added without modifying the existing code structure.</p>
<ol>
<li>
<p><strong>Closed for Modification</strong>: The <code>Subscriber</code> base class is closed for modification. It defines common properties (like <code>subscriberId</code>, <code>address</code>, and <code>baseRate</code>) and an abstract <code>calculateBill</code> method that acts as a placeholder for billing logic. This base class remains unchanged even as new types of subscribers or billing strategies are introduced.</p>
</li>
<li>
<p><strong>Open for Extension</strong>: The <code>calculateBill</code> method in <code>Subscriber</code> can be extended by subclasses, like <code>PhoneSubscriber</code> and <code>ISPSubscriber</code>, to implement custom billing calculations. Each subclass overrides <code>calculateBill</code> according to its unique billing requirements (e.g., <code>PhoneSubscriber</code> calculates based on call duration, while <code>ISPSubscriber</code> uses data usage with free data allowances). This enables additional subscriber types to be created without altering the base class or existing subclasses.</p>
</li>
<li>
<p><strong>Flexible to New Requirements</strong>: By following OCP, any new type of subscriber can be added—such as <code>PremiumSubscriber</code> or <code>CorporateSubscriber</code>—with its own billing logic without affecting the existing structure. This ensures that the core system remains stable, extensible, and easily maintainable as new features or subscriber types are introduced.</p>
</li>
</ol>
<pre class="mermaid">---
title: Open Closed Principle - Class Diagram
---
classDiagram
    class Subscriber {
        +Long subscriberId
        +String address
        +Long phoneNumber
        +int baseRate
        +double calculateBill()
    }
    
    class PhoneSubscriber {
        +double calculateBill()
    }
    
    class ISPSubscriber {
        +double calculateBill()
        +long freeUsage
        +void setFreeUsage(long freeUsage)
        +long getFreeUsage()
    }

    Subscriber <|-- PhoneSubscriber
    Subscriber <|-- ISPSubscriber
</pre>
<hr>
<h2 id="13-liskov-substitution-principle">1.3 Liskov Substitution Principle<a hidden class="anchor" aria-hidden="true" href="#13-liskov-substitution-principle">#</a></h2>
<blockquote>
<p><strong>Objects of a superclass should be replaceable with objects of a subclass without altering the correctness of the program.</strong></p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: Violation of LSP</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Violation of LSP</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.solid.lsp;

class Rectangle {

    private int width;

    private int height;

    public Rectangle(int width, int height) {
        this.width = width;
        this.height = height;
    }

    public int getWidth() {
        return width;
    }

    public void setWidth(int width) {
        this.width = width;
    }

    public int getHeight() {
        return height;
    }

    public void setHeight(int height) {
        this.height = height;
    }

    public int computeArea() {
        return width * height;
    }
}

class Square extends Rectangle {

    public Square(int side) {
        super(side, side);
    }

    @Override
    public void setWidth(int width) {
        setSide(width);
    }

    @Override
    public void setHeight(int height) {
        setSide(height);
    }

    public void setSide(int side) {
        super.setWidth(side);
        super.setHeight(side);
    }
}


public class Main {

    public static void main(String[] args) {
        Rectangle rectangle = new Rectangle(10, 20);
        System.out.println(rectangle.computeArea()); // 200 = 10 * 20

        Square square = new Square(10);
        System.out.println(square.computeArea()); // 100 = 10 * 10

        useRectangle(rectangle);
        System.out.println(rectangle.computeArea()); // 600 = 20 * 30

        useRectangle(square); // Violates Liskov Substitution Principle
        System.out.println(square.computeArea()); // 900 = 30 * 30
    }

    private static void useRectangle(Rectangle rectangle) {
        rectangle.setHeight(20);
        rectangle.setWidth(30);
        assert rectangle.getHeight() == 20 : "Height Not equal to 20";
        assert rectangle.getWidth() == 30 : "Width Not equal to 30";
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<blockquote>
<p>In the above code, the <code>useRectangle</code> method assumes that it can independently set the width and height of a <code>Rectangle</code>. However, when a <code>Square</code> (a subclass of <code>Rectangle</code>) object is passed to it, unexpected behavior will occur.</p>
</blockquote>
<hr>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: After Refactoring</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">After Refactoring</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.solid.lsp;

interface Shape {
    int computeArea();
}

class Rectangle implements Shape {
    private int width;
    private int height;

    public Rectangle(int width, int height) {
        this.width = width;
        this.height = height;
    }

    public int getWidth() {
        return width;
    }

    public void setWidth(int width) {
        this.width = width;
    }

    public int getHeight() {
        return height;
    }

    public void setHeight(int height) {
        this.height = height;
    }

    @Override
    public int computeArea() {
        return width * height;
    }
}

class Square implements Shape {
    private int side;

    public Square(int side) {
        this.side = side;
    }

    public void setSide(int side) {
        this.side = side;
    }

    public int getSide() {
        return side;
    }

    @Override
    public int computeArea() {
        return side * side;
    }
}

public class Main {
    public static void main(String[] args) {
        Rectangle rectangle = new Rectangle(10, 20);
        System.out.println(rectangle.computeArea());

        Square square = new Square(10);
        System.out.println(square.computeArea());

        useRectangle(rectangle);
    }

    private static void useRectangle(Rectangle rectangle) {
        rectangle.setHeight(20);
        rectangle.setWidth(30);
        assert rectangle.getHeight() == 20 : "Height Not equal to 20";
        assert rectangle.getWidth() == 30 : "Width Not equal to 30";
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<blockquote>
<p>After refactoring, the <code>useRectangle</code> method is now dedicated exclusively to the <code>Rectangle</code> class.</p>
</blockquote>
<hr>
<h2 id="14-interface-segregation-principle">1.4 Interface Segregation Principle<a hidden class="anchor" aria-hidden="true" href="#14-interface-segregation-principle">#</a></h2>
<blockquote>
<p><strong>No client should be forced to depend on methods it does not use.</strong></p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: Violation of ISP</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Violation of ISP</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.solid.isp;

import java.time.LocalDateTime;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

// Abstract Entity Class
abstract class Entity {
    private Long id;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
}

// Order Entity
class Order extends Entity {
    private LocalDateTime orderPlacedOn;
    private double totalValue;

    public LocalDateTime getOrderPlacedOn() {
        return orderPlacedOn;
    }

    public void setOrderPlacedOn(LocalDateTime orderPlacedOn) {
        this.orderPlacedOn = orderPlacedOn;
    }

    public double getTotalValue() {
        return totalValue;
    }

    public void setTotalValue(double totalValue) {
        this.totalValue = totalValue;
    }
}

// User Entity
class User extends Entity {
    private String name;
    private LocalDateTime lastLogin;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public LocalDateTime getLastLogin() {
        return lastLogin;
    }

    public void setLastLogin(LocalDateTime lastLogin) {
        this.lastLogin = lastLogin;
    }
}

// Persistence Service Interface
interface PersistenceService&lt;T extends Entity&gt; {
    void save(T entity);

    void delete(T entity);

    T findById(Long id);

    /**
     * ISP VIOLATION!!!
     * 
     * Order entity doesn't have a name property and hence doesn't 
     * need to implement the findByName method
     */
    List<T> findByName(String name);
}

// User Persistence Service
class UserPersistenceService implements PersistenceService&lt;User&gt; {
    private static final Map&lt;Long, User&gt; USERS = new HashMap&lt;&gt;();

    @Override
    public void save(User entity) {
        synchronized (USERS) {
            USERS.put(entity.getId(), entity);
        }
    }

    @Override
    public void delete(User entity) {
        synchronized (USERS) {
            USERS.remove(entity.getId());
        }
    }

    @Override
    public User findById(Long id) {
        synchronized (USERS) {
            return USERS.get(id);
        }
    }

    @Override
    public List<User> findByName(String name) {
        synchronized (USERS) {
            return USERS.values().stream()
                    .filter(u -> u.getName().equalsIgnoreCase(name))
                    .collect(Collectors.toList());
        }
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<blockquote>
<p>The above code violates the <strong>Interface Segregation Principle</strong> because the <code>PersistenceService</code> interface defines methods that are not applicable to all entities. For instance, the <code>Order</code> entity does not have a <code>name</code> property and therefore does not require the <code>findByName</code> method.</p>
</blockquote>
<hr>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: After Refactoring</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">After Refactoring</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.time.LocalDateTime;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

// Abstract Entity Class
abstract class Entity {
    private Long id;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
}

// User Entity
class User extends Entity {
    private String name;
    private LocalDateTime lastLogin;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public LocalDateTime getLastLogin() {
        return lastLogin;
    }

    public void setLastLogin(LocalDateTime lastLogin) {
        this.lastLogin = lastLogin;
    }
}

// Order Entity
class Order extends Entity {
    private LocalDateTime orderPlacedOn;
    private double totalValue;

    public LocalDateTime getOrderPlacedOn() {
        return orderPlacedOn;
    }

    public void setOrderPlacedOn(LocalDateTime orderPlacedOn) {
        this.orderPlacedOn = orderPlacedOn;
    }

    public double getTotalValue() {
        return totalValue;
    }

    public void setTotalValue(double totalValue) {
        this.totalValue = totalValue;
    }
}

// Persistence Service Interface
interface PersistenceService&lt;T extends Entity&gt; {
    void save(T entity);

    void delete(T entity);

    T findById(Long id);
}

// Order Persistence Service
class OrderPersistenceService implements PersistenceService&lt;Order&gt; {
    private static final Map&lt;Long, Order&gt; ORDERS = new HashMap&lt;&gt;();

    @Override
    public void save(Order entity) {
        synchronized (ORDERS) {
            ORDERS.put(entity.getId(), entity);
        }
    }

    @Override
    public void delete(Order entity) {
        synchronized (ORDERS) {
            ORDERS.remove(entity.getId());
        }
    }

    @Override
    public Order findById(Long id) {
        synchronized (ORDERS) {
            return ORDERS.get(id);
        }
    }
}

// User Persistence Service
class UserPersistenceService implements PersistenceService&lt;User&gt; {
    private static final Map&lt;Long, User&gt; USERS = new HashMap&lt;&gt;();

    @Override
    public void save(User entity) {
        synchronized (USERS) {
            USERS.put(entity.getId(), entity);
        }
    }

    @Override
    public void delete(User entity) {
        synchronized (USERS) {
            USERS.remove(entity.getId());
        }
    }

    @Override
    public User findById(Long id) {
        synchronized (USERS) {
            return USERS.get(id);
        }
    }

    public List<User> findByName(String name) {
        synchronized (USERS) {
            return USERS.values().stream()
                    .filter(u -> u.getName().equalsIgnoreCase(name))
                    .collect(Collectors.toList());
        }
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<blockquote>
<p>After refactoring, the <code>PersistenceService</code> interface includes only the generic methods (<code>save</code>, <code>findById</code>, and <code>delete</code>) that are applicable to all entities.</p>
</blockquote>
<hr>
<h2 id="15-dependency-inversion-principle">1.5 Dependency Inversion Principle<a hidden class="anchor" aria-hidden="true" href="#15-dependency-inversion-principle">#</a></h2>
<blockquote>
<p><strong>High-level modules should not depend on low-level modules. Both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions</strong></p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: Violation of DIP</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Violation of DIP</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >package dev.signalyu.solid.dip;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.time.LocalDateTime;
import java.time.ZoneId;

// Common interface for classes formatting Message object
interface Formatter {
    String format(Message message) throws FormatException;
}

// Thrown by formatter
class FormatException extends IOException {
    public FormatException(Exception cause) {
        super(cause);
    }
}

// Formats message to JSON format
class JSONFormatter implements Formatter {
    public String format(Message message) throws FormatException {
        ObjectMapper mapper = new ObjectMapper();
        try {
            return mapper.writeValueAsString(message);
        } catch (JsonProcessingException e) {
            e.printStackTrace();
            throw new FormatException(e);
        }
    }
}

// Message class with content and timestamp
class Message {
    private String msg;
    private LocalDateTime timestamp;

    public Message(String msg) {
        this.msg = msg;
        this.timestamp = LocalDateTime.now(ZoneId.of("UTC"));
    }

    public String getMsg() {
        return msg;
    }

    public LocalDateTime getTimestamp() {
        return timestamp;
    }
}

// Writes message to a file
class MessagePrinter {
    /**
    * MessagePrinter directly instantiates the JSONFormatter object inside the 
    * writeMessage method, which violates the Dependency Inversion Principle.
    */
    public void writeMessage(Message msg, String fileName) throws IOException {
        Formatter formatter = new JSONFormatter(); // creates formatter
        try (PrintWriter writer = new PrintWriter(new FileWriter(fileName))) { // creates print writer
            writer.println(formatter.format(msg)); // formats and writes message
            writer.flush();
        }
    }
}

// Main class
public class Main {
    public static void main(String[] args) throws IOException {
        Message msg = new Message("This is a message again");
        MessagePrinter printer = new MessagePrinter();
        printer.writeMessage(msg, "test_msg.txt");
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<blockquote>
<p>In the above code, the <code>MessagePrinter</code> class directly instanitiates the <code>JSONFormatter</code> object inside the <code>writeMessage</code> method, which violates the <code>Dependency Inversion Principle</code>. This tight coupling means that if a new formatter, such as <code>TextFormatter</code>, needs to be added, the <code>writeMessage</code> method must be modified. This violates the Open-Closed Principle, which states that classes should be open for extension but closed for modification. According to the <strong>Dependency Inversion Principle</strong>, the high-level module (<code>MessagePrinter</code>) should not depend on the low-level module (<code>JSONFormatter</code>). Instead, both should depend on abstractions, such as the <code>Formatter</code> interface.</p>
</blockquote>
<hr>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: After Refactoring</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">After Refactoring</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import java.io.IOException;
import java.io.PrintWriter;
import java.time.LocalDateTime;
import java.time.ZoneId;

// Common interface for classes formatting Message objects
interface Formatter {
    String format(Message message) throws FormatException;
}

// Custom exception thrown by Formatter
class FormatException extends IOException {
    public FormatException(Exception cause) {
        super(cause);
    }
}

// Formats a Message object to JSON format
class JSONFormatter implements Formatter {
    public String format(Message message) throws FormatException {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new JavaTimeModule());
        try {
            return mapper.writeValueAsString(message);
        } catch (JsonProcessingException e) {
            e.printStackTrace();
            throw new FormatException(e);
        }
    }
}

// Represents a message with content and a timestamp
class Message {
    private String msg;
    private LocalDateTime timestamp;

    public Message(String msg) {
        this.msg = msg;
        this.timestamp = LocalDateTime.now(ZoneId.of("UTC"));
    }

    public String getMsg() {
        return msg;
    }

    public LocalDateTime getTimestamp() {
        return timestamp;
    }
}

// Responsible for writing a formatted Message to a file or output stream
class MessagePrinter {
    public void writeMessage(Message msg, Formatter formatter, PrintWriter writer) throws IOException {
        writer.println(formatter.format(msg)); // Formats and writes the message
        writer.flush();
    }
}

// Main class demonstrating functionality
public class Main {
    public static void main(String[] args) throws IOException {
        Message msg = new Message("This is a message again");
        MessagePrinter printer = new MessagePrinter();
        try (PrintWriter writer = new PrintWriter(System.out)) { // Writing to console output
            printer.writeMessage(msg, new JSONFormatter(), writer);
        }
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<blockquote>
<p>After refactoring, the <code>MessagePrinter</code> class now depends on the <code>Formatter</code> abstraction rather than its concrete implementations. This makes it easier to replace <code>JSONFormatter</code> with any other implementation of <code>Formatter</code> without modifying the existing code, adhering to the <strong>Open-Closed Principle</strong>.</p>
</blockquote>
<hr>
<h1 id="2-creational-design-patterns">2. Creational Design Patterns<a hidden class="anchor" aria-hidden="true" href="#2-creational-design-patterns">#</a></h1>
<blockquote>
<p><strong><em>Creational Design Patterns</em> focus on the process of object creation, ensuring flexibility and promoting code reuse.</strong></p>
</blockquote>
<hr>
<h2 id="21-builder">2.1 Builder<a hidden class="anchor" aria-hidden="true" href="#21-builder">#</a></h2>
<blockquote>
<p>The <strong>Builder Design Pattern</strong> is a <strong>creational design pattern</strong> that enables the step-by-step construction of complex objects. It separates the construction process form the object&rsquo;s representation, allowing the same process to produce different representations. <strong>This pattern is often used to build complex or immutable obejcts.</strong></p>
</blockquote>
<hr>
<blockquote>
<p>❔❔❔ <strong>Same Construction Process Creates Different Representations</strong>:</p>
</blockquote>
<ul>
<li>
<p>Consider building a meal in a fast-food restaurant, where the construction steps include:</p>
<ol>
<li><strong>Add a main dish</strong> (e.g., burger, sandwich, or pizza).</li>
<li><strong>Add a side dish</strong> (e.g., fries, salad, or breadsticks).</li>
<li><strong>Add a drink</strong> (e.g., soda, coffee, or juice).</li>
</ol>
</li>
<li>
<p>The construction process remains consistent: <em>(main dish + side dish + drink)</em>. However, the final representation varies based on the choices:</p>
<ol>
<li><strong>Veggie Meal</strong>: Sandwich + Salad + Juice.</li>
<li><strong>Classic Meal</strong>: Burger + Fries + Soda.</li>
<li><strong>Kids&rsquo; Meal</strong>: Mini Pizza + Fries + Milk.</li>
</ol>
</li>
</ul>
<hr>
<pre class="mermaid">---
title: URL Diagram of Builder Pattern
---
classDiagram
    class Builder {
        +buildPartA()
        +buildPartB()
        +getResult()
    }
    
    class ConcreteBuilder1 {
        +buildPartA()
        +buildPartB()
        +getResult()
    }

    class ConcreteBuilder2 {
        +buildPartA()
        +buildPartB()
        +getResult()
    }

    class Director {
        +construct(builder: Builder)
    }

    class Product {
        +PartA
        +PartB
    }

    Builder <|-- ConcreteBuilder1
    Builder <|-- ConcreteBuilder2
    Director --> Builder : uses
    ConcreteBuilder1 --> Product : creates
    ConcreteBuilder2 --> Product : creates
</pre>
<blockquote>
<p>ℹ️ In a context of <strong>design patterns</strong>, <strong>UML (Unified Modeling Language)</strong> is commonly used to represent the structure and behavior of the patterns in a clear and simple manner.</p>
</blockquote>
<hr>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: Director</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.time.LocalDate;
import java.time.Period;
import java.util.Objects;

// Address class
class Address {
    private String houseNumber;
    private String street;
    private String city;
    private String zipcode;
    private String state;

    public Address(String houseNumber, String street, String city, String state, String zipcode) {
        this.houseNumber = houseNumber;
        this.street = street;
        this.city = city;
        this.state = state;
        this.zipcode = zipcode;
    }

    public String getFullAddress() {
        return houseNumber + ", " + street + "\n" + city + "\n" + state + " " + zipcode;
    }
}

// User class
class User {
    private String firstName;
    private String lastName;
    private LocalDate birthday;
    private Address address;

    public User(String firstName, String lastName, LocalDate birthday, Address address) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.birthday = birthday;
        this.address = address;
    }

    public String getFirstName() {
        return firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public LocalDate getBirthday() {
        return birthday;
    }

    public Address getAddress() {
        return address;
    }
}

// UserDTO interface
interface UserDTO {
    String getName();

    String getAddress();

    String getAge();
}

// UserWebDTO implementation
class UserWebDTO implements UserDTO {
    private final String name;
    private final String address;
    private final String age;

    public UserWebDTO(String name, String address, String age) {
        this.name = name;
        this.address = address;
        this.age = age;
    }

    @Override
    public String getName() {
        return name;
    }

    @Override
    public String getAddress() {
        return address;
    }

    @Override
    public String getAge() {
        return age;
    }

    @Override
    public String toString() {
        return "Name: " + name + "\nAge: " + age + "\nAddress:\n" + address;
    }
}

// UserDTOBuilder interface
interface UserDTOBuilder {
    UserDTOBuilder withFirstName(String firstName);

    UserDTOBuilder withLastName(String lastName);

    UserDTOBuilder withBirthday(LocalDate birthday);

    UserDTOBuilder withAddress(Address address);

    UserDTO build();
}

// Concrete builder
class UserWebDTOBuilder implements UserDTOBuilder {
    private String firstName;
    private String lastName;
    private String age;
    private String address;

    @Override
    public UserDTOBuilder withFirstName(String firstName) {
        this.firstName = firstName;
        return this;
    }

    @Override
    public UserDTOBuilder withLastName(String lastName) {
        this.lastName = lastName;
        return this;
    }

    @Override
    public UserDTOBuilder withBirthday(LocalDate birthday) {
        if (Objects.nonNull(birthday)) {
            this.age = String.valueOf(Period.between(birthday, LocalDate.now()).getYears());
        }
        return this;
    }

    @Override
    public UserDTOBuilder withAddress(Address address) {
        if (Objects.nonNull(address)) {
            this.address = address.getFullAddress();
        }
        return this;
    }

    @Override
    public UserDTO build() {
        return new UserWebDTO(firstName + " " + lastName, address, age);
    }
}

// Client code (Director)
public class Client {
    public static void main(String[] args) {
        User user = createUser();
        UserDTOBuilder builder = new UserWebDTOBuilder();
        UserDTO userDTO = buildUserDTO(builder, user);
        System.out.println(userDTO);
    }

    private static UserDTO buildUserDTO(UserDTOBuilder builder, User user) {
        return builder.withFirstName(user.getFirstName())
                .withLastName(user.getLastName())
                .withBirthday(user.getBirthday())
                .withAddress(user.getAddress())
                .build();
    }

    private static User createUser() {
        Address address = new Address("100", "State Street", "Pawnee", "Indiana", "47998");
        return new User("Ron", "Swanson", LocalDate.of(1960, 5, 6), address);
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: Inner Builder</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.time.LocalDate;
import java.time.Period;

// Address class with Builder
class Address {
    private final String houseNumber;
    private final String street;
    private final String city;
    private final String zipcode;
    private final String state;

    private Address(Builder builder) {
        this.houseNumber = builder.houseNumber;
        this.street = builder.street;
        this.city = builder.city;
        this.zipcode = builder.zipcode;
        this.state = builder.state;
    }

    public String getFullAddress() {
        return houseNumber + ", " + street + "\n" + city + "\n" + state + " " + zipcode;
    }

    public static class Builder {
        private String houseNumber;
        private String street;
        private String city;
        private String zipcode;
        private String state;

        public Builder setHouseNumber(String houseNumber) {
            this.houseNumber = houseNumber;
            return this;
        }

        public Builder setStreet(String street) {
            this.street = street;
            return this;
        }

        public Builder setCity(String city) {
            this.city = city;
            return this;
        }

        public Builder setZipcode(String zipcode) {
            this.zipcode = zipcode;
            return this;
        }

        public Builder setState(String state) {
            this.state = state;
            return this;
        }

        public Address build() {
            return new Address(this);
        }
    }
}

// User class with Builder
class User {
    private final String firstName;
    private final String lastName;
    private final LocalDate birthday;
    private final Address address;

    private User(Builder builder) {
        this.firstName = builder.firstName;
        this.lastName = builder.lastName;
        this.birthday = builder.birthday;
        this.address = builder.address;
    }

    public String getFirstName() {
        return firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public LocalDate getBirthday() {
        return birthday;
    }

    public Address getAddress() {
        return address;
    }

    public static class Builder {
        private String firstName;
        private String lastName;
        private LocalDate birthday;
        private Address address;

        public Builder setFirstName(String firstName) {
            this.firstName = firstName;
            return this;
        }

        public Builder setLastName(String lastName) {
            this.lastName = lastName;
            return this;
        }

        public Builder setBirthday(LocalDate birthday) {
            this.birthday = birthday;
            return this;
        }

        public Builder setAddress(Address address) {
            this.address = address;
            return this;
        }

        public User build() {
            return new User(this);
        }
    }
}

// UserDTO interface
interface UserDTO {
    String getName();

    String getAddress();

    String getAge();
}

// UserWebDTO implementation
class UserWebDTO implements UserDTO {
    private final String name;
    private final String address;
    private final String age;

    private UserWebDTO(Builder builder) {
        this.name = builder.name;
        this.address = builder.address;
        this.age = builder.age;
    }

    @Override
    public String getName() {
        return name;
    }

    @Override
    public String getAddress() {
        return address;
    }

    @Override
    public String getAge() {
        return age;
    }

    @Override
    public String toString() {
        return "Name: " + name + "\nAge: " + age + "\nAddress:\n" + address;
    }

    public static class Builder {
        private String name;
        private String address;
        private String age;

        public Builder setName(String name) {
            this.name = name;
            return this;
        }

        public Builder setAddress(String address) {
            this.address = address;
            return this;
        }

        public Builder setAge(String age) {
            this.age = age;
            return this;
        }

        public UserWebDTO build() {
            return new UserWebDTO(this);
        }
    }
}

// Client code
public class Client {
    public static void main(String[] args) {
        Address address = new Address.Builder()
                .setHouseNumber("100")
                .setStreet("State Street")
                .setCity("Pawnee")
                .setState("Indiana")
                .setZipcode("47998")
                .build();

        User user = new User.Builder()
                .setFirstName("Ron")
                .setLastName("Swanson")
                .setBirthday(LocalDate.of(1960, 5, 6))
                .setAddress(address)
                .build();

        UserWebDTO userDTO = new UserWebDTO.Builder()
                .setName(user.getFirstName() + " " + user.getLastName())
                .setAddress(user.getAddress().getFullAddress())
                .setAge(String.valueOf(Period.between(user.getBirthday(), LocalDate.now()).getYears()))
                .build();

        System.out.println(userDTO);
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<h3 id="summary">Summary<a hidden class="anchor" aria-hidden="true" href="#summary">#</a></h3>
<blockquote>
<p><strong>Why builder pattern is capable of creating immutable objects?</strong></p>
</blockquote>
<p>Implementing the builder as a static inner class facilitates the creation of immutable objects. The builder class has provileged access to the enclosing class&rsquo;s internal state during the construction process. However, once the final object is built, it does not expose any setters or methods that modify its state, ensuring immutability.</p>
<hr>
<blockquote>
<p>The <code>Director</code> in the <strong>Builder Design Pattern</strong> is responsible for the construction process but is often not implemented as a standalone class. Instead, its responsibilities are typically handled by the client code or the consumer that requires the constructed object. This approach avoids the need for a separate director class, especially when the construction logic is simple or tailored to the client&rsquo;s specific requirements.</p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: Without a Director</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >UserDTO userDTO = new UserWebDTOBuilder()
                    .withFirstName("John")
                    .withLastName("Doe")
                    .withBirthday(LocalDate.of(1990, 1, 1))
                    .withAddress(new Address("123", "Main St", "City", "State", "12345"))
                    .build();
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: With a Director</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >public class Director {
    public UserDTO constructUser(UserDTOBuilder builder) {
        return builder.withFirstName("John")
                      .withLastName("Doe")
                      .withBirthday(LocalDate.of(1990, 1, 1))
                      .withAddress(new Address("123", "Main St", "City", "State", "12345"))
                      .build();
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<hr>
<blockquote>
<p>If a <code>Product</code> in the <strong>Builder Design Pattern</strong> is not part of an inheritance hierarchy, creating an abstract builder is unnecessary. The abstract builder is typically used to define method for mutiple types of builders. When there is only one type of product to construct, a concrete builder alone is sufficient to meet the requirements.</p>
</blockquote>
<hr>
<h2 id="22-simple-factory">2.2 Simple Factory<a hidden class="anchor" aria-hidden="true" href="#22-simple-factory">#</a></h2>
<blockquote>
<p>The <strong>Simple Factory</strong> design pattern is a creational design pattern that delegates the responsibility of creating instances of different classes to a factory class, typically using a static method based on input parameters. This pattern centralizes object creation, simplifying the client code. However, it can violate the <strong>Open-Closed Principle (OCP)</strong>, because adding a new product type requires modifying the factory class itself. This makes the code less flexible and harder to extend without altering existing source code.</p>
</blockquote>
<hr>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.time.LocalDateTime;
import java.time.LocalDate;

// Abstract Post class
public abstract class Post {
    private Long id;
    private String title;
    private String content;
    private LocalDateTime createdOn;
    private LocalDateTime publishedOn;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public LocalDateTime getCreatedOn() {
        return createdOn;
    }

    public void setCreatedOn(LocalDateTime createdOn) {
        this.createdOn = createdOn;
    }

    public LocalDateTime getPublishedOn() {
        return publishedOn;
    }

    public void setPublishedOn(LocalDateTime publishedOn) {
        this.publishedOn = publishedOn;
    }
}

// BlogPost class extends Post
public class BlogPost extends Post {
    private String author;
    private String[] tags;

    public String getAuthor() {
        return author;
    }

    public void setAuthor(String author) {
        this.author = author;
    }

    public String[] getTags() {
        return tags;
    }

    public void setTags(String[] tags) {
        this.tags = tags;
    }
}

// NewsPost class extends Post
public class NewsPost extends Post {
    private String headline;
    private LocalDate newsTime;

    public String getHeadline() {
        return headline;
    }

    public void setHeadline(String headline) {
        this.headline = headline;
    }

    public LocalDate getNewsTime() {
        return newsTime;
    }

    public void setNewsTime(LocalDate newsTime) {
        this.newsTime = newsTime;
    }
}

// ProductPost class extends Post
public class ProductPost extends Post {
    private String imageUrl;
    private String name;

    public String getImageUrl() {
        return imageUrl;
    }

    public void setImageUrl(String imageUrl) {
        this.imageUrl = imageUrl;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

// PostFactory class to create different types of posts
public class PostFactory {
    public static Post createPost(String type) {
        switch (type) {
            case "blog":
                return new BlogPost();
            case "news":
                return new NewsPost();
            case "product":
                return new ProductPost();
            default:
                throw new IllegalArgumentException("Post type is unknown");
        }
    }
}

// Client class to demonstrate the usage of Simple Factory
public class Client {
    public static void main(String[] args) {
        Post post = PostFactory.createPost("news");
        System.out.println(post.getClass().getSimpleName()); // Prints the type of the created post (NewsPost)
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<pre class="mermaid">classDiagram
    direction RL
    class Post {
        - Long id
        - String title
        - String content
        - LocalDateTime createdOn
        - LocalDateTime publishedOn
        + getId()
        + setId(Long)
        + getTitle()
        + setTitle(String)
        + getContent()
        + setContent(String)
        + getCreatedOn()
        + setCreatedOn(LocalDateTime)
        + getPublishedOn()
        + setPublishedOn(LocalDateTime)
    }

    class BlogPost {
        - String author
        - String[] tags
        + getAuthor()
        + setAuthor(String)
        + getTags()
        + setTags(String[])
    }

    class NewsPost {
        - String headline
        - LocalDate newsTime
        + getHeadline()
        + setHeadline(String)
        + getNewsTime()
        + setNewsTime(LocalDate)
    }

    class ProductPost {
        - String imageUrl
        - String name
        + getImageUrl()
        + setImageUrl(String)
        + getName()
        + setName(String)
    }

    class PostFactory {
        + createPost(String)
    }

    Post <|-- BlogPost
    Post <|-- NewsPost
    Post <|-- ProductPost

    PostFactory --|> BlogPost : creates
    PostFactory --|> NewsPost : creates
    PostFactory --|> ProductPost : creates

    
</pre>
<hr>
<blockquote>
<p>The above code violates the <strong>Open-Closed Principle</strong> because when adding a new post type, such as <code>EventPost</code>, to the factory, the code must be modified by adding a new case statement, like the following:</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;event&#34;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> EventPost();
</span></span></code></pre></div><blockquote>
<p>This approach breaks the OCP, which dictates that entities should be open for extension but closed for modification.</p>
</blockquote>
<hr>
<h2 id="23-factory-method">2.3 Factory Method<a hidden class="anchor" aria-hidden="true" href="#23-factory-method">#</a></h2>
<blockquote>
<p>The <strong>Factory Method</strong> design pattern is a creational pattern that provides a method for creating objects in a superclass, while allowing subclasses to determine the type of object that will be created. This approach delegates the object creation process to the subclasses, enabling them to instantiate specific classes without the superclass needing to know the exact class being instantiated.</p>
</blockquote>
<hr>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.util.*;

/**
 * Abstract class representing a message, which is the "product".
 * Subclasses will provide specific content types.
 */
abstract class Message {

    public abstract String getContent();
    
    public void addDefaultHeaders() {
        // Adds some default headers
    }
    
    public void encrypt() {
        // Has some code to encrypt the content
    }
}

/**
 * Concrete implementation of the Message class for Text messages.
 */
class TextMessage extends Message {

    @Override
    public String getContent() {
        return "Text";
    }
}

/**
 * Concrete implementation of the Message class for JSON messages.
 */
class JSONMessage extends Message {

    @Override
    public String getContent() {
        return "{\"JSON\":[]}";
    }
}

/**
 * Abstract creator class. The factory method createMessage() must be implemented
 * by subclasses to instantiate the specific message type.
 */
abstract class MessageCreator {

    public Message getMessage() {
        Message msg = createMessage();
        
        msg.addDefaultHeaders();
        msg.encrypt();
        
        return msg;
    }
    
    // Factory method to create a message
    protected abstract Message createMessage();
}

/**
 * Concrete creator for creating JSON messages.
 */
class JSONMessageCreator extends MessageCreator {

    @Override
    public Message createMessage() {
        return new JSONMessage();
    }
}

/**
 * Concrete creator for creating Text messages.
 */
class TextMessageCreator extends MessageCreator {

    @Override
    public Message createMessage() {
        return new TextMessage();
    }
}

/**
 * Client class demonstrating the use of the Factory Method pattern.
 */
public class Client {

    public static void main(String[] args) {
        printMessage(new JSONMessageCreator());
        printMessage(new TextMessageCreator());
    }
    
    public static void printMessage(MessageCreator creator) {
        Message msg = creator.getMessage();
        System.out.println(msg.getContent());
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<pre class="mermaid">---
title: URL Diagram of Factory Method Pattern
---
classDiagram
    Message <|-- TextMessage
    Message <|-- JSONMessage
    MessageCreator <|-- JSONMessageCreator
    MessageCreator <|-- TextMessageCreator

    JSONMessageCreator "1" --> "1" JSONMessage : creates
    TextMessageCreator "1" --> "1" TextMessage : creates

    MessageCreator : +getMessage()
    MessageCreator : +createMessage()

    JSONMessageCreator : +createMessage() 
    TextMessageCreator : +createMessage()

    Message : +getContent() 
    Message : +addDefaultHeaders()
    Message : +encrypt()
</pre>
<hr>
<h2 id="24-prototype">2.4 Prototype<a hidden class="anchor" aria-hidden="true" href="#24-prototype">#</a></h2>
<blockquote>
<p>The <strong>Prototype</strong> design pattern is a creational pattern that enables the creation of new objects by copying an existing object, known as the <strong>prototype</strong>. It is particularly useful when object creation is resource-intensive or when there is a need to dynamically create mana similar objects.</p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >// Point3D class representing a 3D point
class Point3D {
    private float x, y, z;

    public static final Point3D ZERO = new Point3D(0, 0, 0);

    public Point3D(float x, float y, float z) {
        this.x = x;
        this.y = y;
        this.z = z;
    }

    public Point3D normalize() {
        float mag = magnitude();
        return new Point3D(x / mag, y / mag, z / mag);
    }

    private float magnitude() {
        return (float) Math.sqrt(x * x + y * y + z * z);
    }

    public Point3D multiply(float scale) {
        return new Point3D(x * scale, y * scale, z * scale);
    }

    public Point3D add(Point3D vector) {
        return new Point3D(x + vector.x, y + vector.y, z + vector.z);
    }

    @Override
    public String toString() {
        return "(" + x + ", " + y + ", " + z + ")";
    }
}

// Abstract GameUnit class defining the clone method
abstract class GameUnit implements Cloneable {
    private Point3D position;

    public GameUnit() {
        position = Point3D.ZERO;
    }

    @Override
    public GameUnit clone() throws CloneNotSupportedException {
        GameUnit unit = (GameUnit) super.clone();
        unit.initialize();
        return unit;
    }

    protected void initialize() {
        this.position = Point3D.ZERO;
        reset();
    }

    protected abstract void reset();

    public GameUnit(float x, float y, float z) {
        position = new Point3D(x, y, z);
    }

    public void move(Point3D direction, float distance) {
        Point3D finalMove = direction.normalize();
        finalMove = finalMove.multiply(distance);
        position = position.add(finalMove);
    }

    public Point3D getPosition() {
        return position;
    }
}

// Swordsman class extends GameUnit and implements specific behavior
class Swordsman extends GameUnit {
    private String state = "idle";

    public void attack() {
        this.state = "attacking";
    }

    @Override
    public String toString() {
        return "Swordsman " + state + " @ " + getPosition();
    }

    @Override
    protected void reset() {
        state = "idle";
    }
}

// General class extends GameUnit but does not support cloning
class General extends GameUnit {
    private String state = "idle";

    public void boostMorale() {
        this.state = "MoralBoost";
    }

    @Override
    public String toString() {
        return "General " + state + " @ " + getPosition();
    }

    @Override
    public GameUnit clone() throws CloneNotSupportedException {
        throw new CloneNotSupportedException("Generals are unique");
    }

    @Override
    protected void reset() {
        throw new UnsupportedOperationException("Reset not supported");
    }
}

public class Main {
    // Client code to demonstrate the Prototype Pattern
    public static void main(String[] args) throws CloneNotSupportedException {
        // Creating and moving a Swordsman
        Swordsman s1 = new Swordsman();
        s1.move(new Point3D(-10, 0, 0), 20);
        s1.attack();
        System.out.println(s1);

        // Cloning the Swordsman
        Swordsman s2 = (Swordsman) s1.clone();
        System.out.println("Cloned swordsman: " + s2);
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<hr>
<blockquote>
<p><strong>Shallow Copy vs. Deep Copy</strong>: A <strong>shallow copy</strong> creates a new object but only copies the references of the original object&rsquo;s fields. As a result, both the original and the copied object share references to the same inner objects. Any changes made to the inner <em><strong>mutable</strong></em> objects of the copied object will affect the original object as well. In Java, the <code>clone</code> method performs a shallow copy. On the other hand, a <strong>deep copy</strong> involves recursively copying the original object and all the objects it references. As a result, the copied object is entirely independent of the original, and changes made to the copied object do not affect the original one.</p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: Shallow Copy</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.util.ArrayList;
import java.util.List;

/**
 * @author Signal Yu
 * @since 2024-12-2
 */

class Person {
    String name;
    int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return "Person{name='" + name + "', age=" + age + '}';
    }
}

public class Solution {
    public static void main(String[] args) {
        // Original list with mutable objects (Person)
        List&lt;Person&gt; originalList = new ArrayList&lt;&gt;();
        originalList.add(new Person("Alice", 30));
        originalList.add(new Person("Bob", 25));

        // Shallow copy of the list
        List&lt;Person&gt; shallowCopyList = new ArrayList&lt;&gt;(originalList);

        // Modify the object in the shallow copy
        shallowCopyList.get(1).setName("Signal");

        // Print both lists
        System.out.println("Original List: " + originalList);
        System.out.println("Shallow Copy List: " + shallowCopyList);
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW OUTPUT: Shallow Copy</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Output</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-bash" data-lang="bash" >Original List: [Person{name='Alice', age=30}, Person{name='Signal', age=25}]
Shallow Copy List: [Person{name='Alice', age=30}, Person{name='Signal', age=25}]
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE: Deep Copy</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.util.ArrayList;
import java.util.List;

class Person {
    String name;
    int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return "Person{name='" + name + "', age=" + age + '}';
    }

    // Deep copy method for Person class
    public Person deepCopy() {
        return new Person(this.name, this.age);
    }
}

public class Solution {
    public static void main(String[] args) {
        // Original list with mutable objects (Person)
        List&lt;Person&gt; originalList = new ArrayList&lt;&gt;();
        originalList.add(new Person("Alice", 30));
        originalList.add(new Person("Bob", 25));

        // Deep copy of the list (creating new Person objects)
        List&lt;Person&gt; deepCopyList = new ArrayList&lt;&gt;();
        for (Person person : originalList) {
            deepCopyList.add(person.deepCopy()); // Add a deep copy of each person
        }

        // Modify the object in the deep copy
        deepCopyList.get(1).setName("Signal");

        // Print both lists
        System.out.println("Original List: " + originalList);
        System.out.println("Deep Copy List: " + deepCopyList);
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW OUTPUT: Deep Copy</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Output</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-bash" data-lang="bash" >Original List: [Person{name='Alice', age=30}, Person{name='Bob', age=25}]
Deep Copy List: [Person{name='Alice', age=30}, Person{name='Signal', age=25}]
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<hr>
<blockquote>
<p>It is important to note that changes made to immutable objects in a shallow copied object will not affect the original object. For example, when performing a shallow copy of an <code>ArrayList</code> that contains <code>Integer</code> values, changes made to the <code>Integer</code> of the copied object will not affect the original object because <code>Integer</code> is immutable (since it is marked as <code>final</code> and its value cannot be changed).</p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >import java.util.ArrayList;
import java.util.List;

/**
 * @author Signal Yu
 * @since 2024-12-2
 */
public class Solution {
    public static void main(String[] args) {
        // Integer is an immutable class
        List&lt;Integer&gt; original = new ArrayList&lt;&gt;();
        original.add(1);
        original.add(2);

        List<Integer> shallowCopy = new ArrayList&lt;&gt;(original);  // Shallow copy
        shallowCopy.set(0, 99);  // Modify the shallow copy

        System.out.println(original); // Output: [1, 2]
        System.out.println(shallowCopy); // Output: [99, 2]

    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<hr>
<p>Prototype v.s. Builder</p>
<h2 id="25-abstract-factory">2.5 Abstract Factory<a hidden class="anchor" aria-hidden="true" href="#25-abstract-factory">#</a></h2>
<blockquote>
<p>The <strong>Abstract Factory</strong> design pattern is a creational pattern that creates families of related objects without specifying their concrete classes. It allows the client to instantiate objects from a group of related products while ensuring that these objects are compatible with each other. This pattern is particularly useful when a system needs to be independent of how objects are created, composed, and represented. However, a limitation of this pattern is that when a new product type is added, the base factory typically needs to be modified, which can increase the maintainence overhead.</p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >// Represents an abstract product
interface Storage {
    String getId();
}

// Represents a concrete product in a family "Amazon Web Services"
class S3Storage implements Storage {
    public S3Storage(int capacityInMib) {
        System.out.println("Allocated " + capacityInMib + " on S3");
    }

    @Override
    public String getId() {
        return "S31";
    }

    @Override
    public String toString() {
        return "S3 Storage";
    }
}

// Represents a concrete product in a family "Google Cloud Platform"
class GoogleCloudStorage implements Storage {
    public GoogleCloudStorage(int capacityInMib) {
        System.out.println("Allocated " + capacityInMib + " on Google Cloud Storage");
    }

    @Override
    public String getId() {
        return "gcpcs1";
    }

    @Override
    public String toString() {
        return "Google cloud storage";
    }
}

// Represents an abstract product
interface Instance {
    enum Capacity {micro, small, large}

    void start();

    void attachStorage(Storage storage);

    void stop();
}

// Represents a concrete product in a family "Amazon Web Services"
class Ec2Instance implements Instance {
    public Ec2Instance(Capacity capacity) {
        System.out.println("Created Ec2Instance");
    }

    @Override
    public void start() {
        System.out.println("Ec2Instance started");
    }

    @Override
    public void attachStorage(Storage storage) {
        System.out.println("Attached " + storage + " to Ec2Instance");
    }

    @Override
    public void stop() {
        System.out.println("Ec2Instance stopped");
    }

    @Override
    public String toString() {
        return "EC2Instance";
    }
}

// Represents a concrete product in a family "Google Cloud Platform"
class GoogleComputeEngineInstance implements Instance {
    public GoogleComputeEngineInstance(Capacity capacity) {
        System.out.println("Created Google Compute Engine instance");
    }

    @Override
    public void start() {
        System.out.println("Compute engine instance started");
    }

    @Override
    public void attachStorage(Storage storage) {
        System.out.println("Attached " + storage + " to Compute engine instance");
    }

    @Override
    public void stop() {
        System.out.println("Compute engine instance stopped");
    }
}

// Abstract factory with methods defined for each object type.
interface ResourceFactory {
    Instance createInstance(Instance.Capacity capacity);

    Storage createStorage(int capMib);
}

// Factory implementation for Amazon Web Services resources
class AwsResourceFactory implements ResourceFactory {

    @Override
    public Instance createInstance(Instance.Capacity capacity) {
        return new Ec2Instance(capacity);
    }

    @Override
    public Storage createStorage(int capMib) {
        return new S3Storage(capMib);
    }
}

// Factory implementation for Google Cloud Platform resources
class GoogleResourceFactory implements ResourceFactory {

    @Override
    public Instance createInstance(Instance.Capacity capacity) {
        return new GoogleComputeEngineInstance(capacity);
    }

    @Override
    public Storage createStorage(int capMib) {
        return new GoogleCloudStorage(capMib);
    }
}

// Client class
public class Client {

    private ResourceFactory factory;

    public Client(ResourceFactory factory) {
        this.factory = factory;
    }

    public Instance createServer(Instance.Capacity cap, int storageMib) {
        Instance instance = factory.createInstance(cap);
        Storage storage = factory.createStorage(storageMib);
        instance.attachStorage(storage);
        return instance;
    }

    public static void main(String[] args) {
        Client aws = new Client(new AwsResourceFactory());
        Instance i1 = aws.createServer(Instance.Capacity.micro, 20480);
        i1.start();
        i1.stop();

        System.out.println("***************************************");
        Client gcp = new Client(new GoogleResourceFactory());
        i1 = gcp.createServer(Instance.Capacity.micro, 20480);
        i1.start();
        i1.stop();
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW OUTPUT</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Output</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-bash" data-lang="bash" >Created Ec2Instance
Allocated 20480 on S3
Attached S3 Storage to Ec2Instance
Ec2Instance started
Ec2Instance stopped
***************************************
Created Google Compute Engine instance
Allocated 20480 on Google Cloud Storage
Attached Google cloud storage to Compute engine instance
Compute engine instance started
Compute engine instance stopped
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<p><img loading="lazy" src="/img/design-patterns/1-abstract-factory.png" alt="URL Diagram of Abstract Factory Pattern"  />
</p>
<hr>
<blockquote>
<p>Adding a new product type, such as <code>Engine</code>, may require modifications to the base factory. This is because the new <code>Engine</code> product froms a new combination with <code>Storage</code> and <code>Instance</code>, and the base factory is responsible for creating all the products (i.e., <code>Storage</code>, <code>Instance</code>, and <code>Engine</code>). As a result, the base factory needs to include a new method, <code>createEngine</code>. This modification violates the <strong>Open/Closed Principle (OCP)</strong>, which states that classes should be open for extension but closed for modification.</p>
</blockquote>
<head>
    <style>
         
        .collapsibleContainer {
            margin: 20px 0;
        }

        details summary {
            cursor: pointer;
        }

         
        details summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<div class="collapsibleContainer">
    <details>
        <summary>SHOW CODE</summary>
        <div>
            
<link rel="stylesheet" href="/css/tabbed_code.css">


<div class="code_block_container">
    
<div class="tabs">
    



<button class="tab_btn active">Java</button>

</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css"
    integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
<script>hljs.highlightAll();</script>





<div class="code_blocks">
    <div class="code_block active">
        <pre><code class="language-java" data-lang="java" >// Represents an abstract product for Storage
interface Storage {
    String getId();
}

// Represents a concrete product in a family "Amazon Web Services" for Storage
class S3Storage implements Storage {
    public S3Storage(int capacityInMib) {
        System.out.println("Allocated " + capacityInMib + " on S3");
    }

    @Override
    public String getId() {
        return "S31";
    }

    @Override
    public String toString() {
        return "S3 Storage";
    }
}

// Represents a concrete product in a family "Google Cloud Platform" for Storage
class GoogleCloudStorage implements Storage {
    public GoogleCloudStorage(int capacityInMib) {
        System.out.println("Allocated " + capacityInMib + " on Google Cloud Storage");
    }

    @Override
    public String getId() {
        return "gcpcs1";
    }

    @Override
    public String toString() {
        return "Google Cloud Storage";
    }
}

// Represents an abstract product for Engine
interface Engine {
    String getName();
}

// Represents a concrete product in a family "Amazon Web Services" for Engine
class Ec2Engine implements Engine {
    String name;

    public Ec2Engine(String name) {
        this.name = name;
        System.out.println(name + " engine selected.");
    }

    @Override
    public String getName() {
        return name;
    }
}

// Represents a concrete product in a family "Google Cloud Platform" for Engine
class GoogleComputeEngine implements Engine {
    String name;

    public GoogleComputeEngine(String name) {
        this.name = name;
        System.out.println(name + " engine selected.");
    }

    @Override
    public String getName() {
        return name;
    }
}

// Represents an abstract product for Instance
interface Instance {
    enum Capacity {micro, small, large}

    void start();

    void attachStorage(Storage storage);

    void stop();

    void useEngine(Engine engine);
}

// Represents a concrete product in a family "Amazon Web Services" for Instance
class Ec2Instance implements Instance {
    public Ec2Instance(Instance.Capacity capacity) {
        System.out.println("Created Ec2Instance");
    }

    @Override
    public void start() {
        System.out.println("Ec2Instance started");
    }

    @Override
    public void attachStorage(Storage storage) {
        System.out.println("Attached " + storage + " to Ec2Instance");
    }

    @Override
    public void stop() {
        System.out.println("Ec2Instance stopped");
    }

    @Override
    public void useEngine(Engine engine) {
        System.out.println("Ec2Instance uses " + engine.getName() + " engine.");
    }

    @Override
    public String toString() {
        return "EC2Instance";
    }
}

// Represents a concrete product in a family "Google Cloud Platform" for Instance
class GoogleComputeEngineInstance implements Instance {

    public GoogleComputeEngineInstance(Instance.Capacity capacity) {
        System.out.println("Created Google Compute Engine instance");
    }

    @Override
    public void start() {
        System.out.println("Compute engine instance started");
    }

    @Override
    public void attachStorage(Storage storage) {
        System.out.println("Attached " + storage + " to Compute engine instance");
    }

    @Override
    public void stop() {
        System.out.println("Compute engine instance stopped");
    }

    @Override
    public void useEngine(Engine engine) {
        System.out.println("Google compute engine instance uses " + engine.getName() + " engine.");
    }
}

// Abstract factory with methods defined for each object type
interface ResourceFactory {
    Instance createInstance(Instance.Capacity capacity);

    Storage createStorage(int capMib);

    Engine createEngine(String name);
}

// Factory implementation for Amazon Web Services resources
class AwsResourceFactory implements ResourceFactory {

    @Override
    public Instance createInstance(Instance.Capacity capacity) {
        return new Ec2Instance(capacity); // Pass engine to the Ec2Instance
    }

    @Override
    public Storage createStorage(int capMib) {
        return new S3Storage(capMib);
    }

    @Override
    public Engine createEngine(String name) {
        return new Ec2Engine(name);
    }
}

// Factory implementation for Google Cloud Platform resources
class GoogleResourceFactory implements ResourceFactory {
    @Override
    public Instance createInstance(Instance.Capacity capacity) {
        return new GoogleComputeEngineInstance(capacity);
    }

    @Override
    public Storage createStorage(int capMib) {
        return new GoogleCloudStorage(capMib);
    }

    @Override
    public Engine createEngine(String name) {
        return new GoogleComputeEngine(name);
    }
}

// Client class to test the code
public class Client {

    private ResourceFactory factory;

    public Client(ResourceFactory factory) {
        this.factory = factory;
    }

    public Instance createServer(Instance.Capacity cap, int storageMib, String name) {
        Instance instance = factory.createInstance(cap); // Pass engine to instance creation
        Storage storage = factory.createStorage(storageMib);
        Engine engine = factory.createEngine(name);
        instance.attachStorage(storage);
        instance.useEngine(engine); // Call useEngine() on instance, which delegates to engine's getName()
        return instance;
    }

    public static void main(String[] args) {
        Client aws = new Client(new AwsResourceFactory());
        Instance i1 = aws.createServer(Instance.Capacity.micro, 20480, "Ec2");
        i1.start();
        i1.stop();

        System.out.println("***************************************");

        Client gcp = new Client(new GoogleResourceFactory());
        i1 = gcp.createServer(Instance.Capacity.micro, 20480, "GCE");
        i1.start();
        i1.stop();
    }
}
</code></pre>
    </div>
</div>

</div>

<script src="/js/tabbed_code.js"></script>

        </div>
    </details>
</div>
<hr>
<h2 id="26-singleton">2.6 Singleton<a hidden class="anchor" aria-hidden="true" href="#26-singleton">#</a></h2>
<h2 id="27-object-pool">2.7 Object Pool<a hidden class="anchor" aria-hidden="true" href="#27-object-pool">#</a></h2>
<h1 id="3-structural-design-patterns">3. Structural Design Patterns<a hidden class="anchor" aria-hidden="true" href="#3-structural-design-patterns">#</a></h1>
<h2 id="31-adapter">3.1 Adapter<a hidden class="anchor" aria-hidden="true" href="#31-adapter">#</a></h2>
<h2 id="32-bridge">3.2 Bridge<a hidden class="anchor" aria-hidden="true" href="#32-bridge">#</a></h2>
<h2 id="33-decorator">3.3 Decorator<a hidden class="anchor" aria-hidden="true" href="#33-decorator">#</a></h2>
<h2 id="34-composite">3.4 Composite<a hidden class="anchor" aria-hidden="true" href="#34-composite">#</a></h2>
<h2 id="35-facade">3.5 Facade<a hidden class="anchor" aria-hidden="true" href="#35-facade">#</a></h2>
<h2 id="36-flyweight">3.6 Flyweight<a hidden class="anchor" aria-hidden="true" href="#36-flyweight">#</a></h2>
<h2 id="37-proxy">3.7 Proxy<a hidden class="anchor" aria-hidden="true" href="#37-proxy">#</a></h2>
<h1 id="4-behavioral-design-patterns">4. Behavioral Design Patterns<a hidden class="anchor" aria-hidden="true" href="#4-behavioral-design-patterns">#</a></h1>
<h2 id="41-chain-of-responsibility">4.1 Chain of Responsibility<a hidden class="anchor" aria-hidden="true" href="#41-chain-of-responsibility">#</a></h2>
<h2 id="42-command">4.2 Command<a hidden class="anchor" aria-hidden="true" href="#42-command">#</a></h2>
<h2 id="43-interpreter">4.3 Interpreter<a hidden class="anchor" aria-hidden="true" href="#43-interpreter">#</a></h2>
<h2 id="44-mediator">4.4 Mediator<a hidden class="anchor" aria-hidden="true" href="#44-mediator">#</a></h2>
<h2 id="45-iterator">4.5 Iterator<a hidden class="anchor" aria-hidden="true" href="#45-iterator">#</a></h2>
<h2 id="46-momento">4.6 Momento<a hidden class="anchor" aria-hidden="true" href="#46-momento">#</a></h2>
<h2 id="47-observer">4.7 Observer<a hidden class="anchor" aria-hidden="true" href="#47-observer">#</a></h2>
<h2 id="48-state">4.8 State<a hidden class="anchor" aria-hidden="true" href="#48-state">#</a></h2>
<h2 id="49-strategy">4.9 Strategy<a hidden class="anchor" aria-hidden="true" href="#49-strategy">#</a></h2>
<h2 id="410-template-method">4.10 Template Method<a hidden class="anchor" aria-hidden="true" href="#410-template-method">#</a></h2>
<h2 id="411-visitor">4.11 Visitor<a hidden class="anchor" aria-hidden="true" href="#411-visitor">#</a></h2>
<h2 id="412-null-object">4.12 Null Object<a hidden class="anchor" aria-hidden="true" href="#412-null-object">#</a></h2>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://signalyu.github.io/tags/design-patterns/">Design Patterns</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://signalyu.github.io/posts/4-engineering-and-technology/computer-science/data-structures-and-algorithms/1-data-structure-and-algorithms/">
    <span class="title">« PREV</span>
    
    <br>
    <span>Data Structure &amp; Algorithms</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://signalyu.github.io/">Signal&#39;s Blog</a></span> · 
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            "flowchart": { "htmlLabels": true },
            theme: 'dark',
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
        });
    </script>
    
</body>
</html>
